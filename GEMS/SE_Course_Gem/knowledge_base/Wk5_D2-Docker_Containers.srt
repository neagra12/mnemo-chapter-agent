1
00:00:00,890 --> 00:00:03,010
All right. So today
what I want to

2
00:00:03,010 --> 00:00:05,590
talk about is
containers in general

3
00:00:05,590 --> 00:00:09,310
and then Docker
in particular.

4
00:00:09,870 --> 00:00:14,370
And so what do we
mean by containers?

5
00:00:14,370 --> 00:00:15,770
First of all, I
guess one question I

6
00:00:15,770 --> 00:00:17,770
do want to ask is
how many of you have

7
00:00:17,770 --> 00:00:19,850
worked with Docker
containers before?

8
00:00:19,850 --> 00:00:21,230
If you raise your hands.

9
00:00:21,950 --> 00:00:24,110
A few of you.
How many of you

10
00:00:24,110 --> 00:00:26,810
have built your
own containers?

11
00:00:27,790 --> 00:00:29,510
How many of you
have written

12
00:00:29,510 --> 00:00:31,030
your own Docker files?

13
00:00:31,290 --> 00:00:35,310
docker compose files a
few of you done docker

14
00:00:35,310 --> 00:00:40,110
compose okay so a few
of you this is going

15
00:00:40,110 --> 00:00:42,790
to be old hat if you've
done docker compose

16
00:00:42,790 --> 00:00:44,430
and docker build files
you understand how

17
00:00:44,430 --> 00:00:47,150
that works especially
docker compose and all

18
00:00:47,150 --> 00:00:49,330
the nuances of those
you know this is going

19
00:00:49,330 --> 00:00:51,630
to be definitely review
material your teams

20
00:00:51,630 --> 00:00:53,210
are going to well
actually this is not the

21
00:00:53,210 --> 00:00:55,270
docker assignment i'm
going to give is not

22
00:00:55,270 --> 00:00:57,310
a team assignment so
your teams can help

23
00:00:57,310 --> 00:00:59,750
you with understanding
but they're not going

24
00:00:59,750 --> 00:01:01,450
to be able to help you
with that. You're all

25
00:01:01,450 --> 00:01:03,050
going to be doing your
own version of this

26
00:01:03,730 --> 00:01:04,530
assignment.

27
00:01:04,750 --> 00:01:07,530
So what are containers?
So container, and

28
00:01:07,530 --> 00:01:09,990
we've already talked
about virtual machines.

29
00:01:10,410 --> 00:01:13,550
Virtual machines, I
said, we're emulating

30
00:01:13,550 --> 00:01:18,110
or virtualizing an
entire machine, okay?

31
00:01:18,390 --> 00:01:20,930
We said that we define
things like what's,

32
00:01:20,930 --> 00:01:22,430
how much disk does
it have? How much,

33
00:01:22,430 --> 00:01:24,490
how many CPUs is it
going have in it,

34
00:01:24,490 --> 00:01:26,710
how much memory.
Once we've got the

35
00:01:26,710 --> 00:01:29,830
machine defined, then
what we do is we go

36
00:01:29,830 --> 00:01:31,850
and install an
operating system on it.

37
00:01:31,990 --> 00:01:34,850
It's still virtualized,
but it's a real

38
00:01:34,850 --> 00:01:37,050
operating system
that we run. There's

39
00:01:37,050 --> 00:01:38,850
real storage that the
virtual machine is

40
00:01:38,850 --> 00:01:40,410
using. That operating
system gets installed

41
00:01:40,410 --> 00:01:41,970
on that, and when
we run the virtual

42
00:01:41,970 --> 00:01:45,090
machine, it loads
that operating system.

43
00:01:45,250 --> 00:01:48,010
That operating system
oftentimes can be a

44
00:01:48,010 --> 00:01:49,510
completely different
operating system than

45
00:01:49,510 --> 00:01:52,470
what our host machine
is running the

46
00:01:52,470 --> 00:01:54,570
machine that's actually
running our hypervisor

47
00:01:54,570 --> 00:01:57,180
that gives us the
virtual machine is

48
00:01:57,430 --> 00:02:00,290
probably running its
own operating system

49
00:02:00,290 --> 00:02:02,260
unless you're running
a type one hypervisor

50
00:02:03,190 --> 00:02:06,370
and so these type two
hypervisors usually

51
00:02:06,370 --> 00:02:08,070
are running completely
different os sometimes

52
00:02:08,070 --> 00:02:09,990
you can run the exact
same os but usually

53
00:02:09,990 --> 00:02:11,530
you're oftentimes
running a different

54
00:02:11,530 --> 00:02:13,890
one so for instance
on my mac i'm running

55
00:02:13,890 --> 00:02:18,470
mac os but when i
typically run vms they're

56
00:02:18,470 --> 00:02:20,390
usually linux vms
and they're running a

57
00:02:20,390 --> 00:02:22,250
Linux operating system,
which is completely

58
00:02:22,250 --> 00:02:24,830
different than the
Mac operating system.

59
00:02:24,990 --> 00:02:28,190
Now, when we talked
about the virtual

60
00:02:28,190 --> 00:02:29,870
machines, we said,
OK, these are all the

61
00:02:29,870 --> 00:02:32,430
resources that have to
be given to it. And even

62
00:02:32,430 --> 00:02:35,170
though they're
virtualized, one of the

63
00:02:35,170 --> 00:02:36,710
things I talked about
with memory, for

64
00:02:36,710 --> 00:02:39,370
instance, I said that
if you're going to run,

65
00:02:40,050 --> 00:02:43,230
when you run your
virtual machines, you can

66
00:02:43,230 --> 00:02:45,850
specify how much
memory that you want to

67
00:02:45,850 --> 00:02:48,190
give to that virtual
machine. But but

68
00:02:48,190 --> 00:02:50,370
you're still going to
be limited typically to

69
00:02:50,370 --> 00:02:53,730
the amount of physical
memory that you have

70
00:02:53,730 --> 00:02:55,430
in the host system
that you're running.

71
00:02:56,490 --> 00:02:58,090
And typically,
you're going to

72
00:02:58,090 --> 00:02:59,870
give it a lot
less memory than

73
00:02:59,870 --> 00:03:01,390
what you have on
the host system.

74
00:03:02,410 --> 00:03:04,650
Same thing with
disk resources and

75
00:03:04,650 --> 00:03:05,860
such. You have to
have enough space

76
00:03:05,860 --> 00:03:08,310
for the disk
image for your VM.

77
00:03:08,450 --> 00:03:11,130
A typical disk for
launching a machine

78
00:03:11,130 --> 00:03:13,690
these days is about
the minimum that

79
00:03:13,690 --> 00:03:15,740
you'd want is a
20 gigabyte drive.

80
00:03:17,850 --> 00:03:19,410
Anything smaller and
you're starting to

81
00:03:19,410 --> 00:03:21,570
get real tight,
especially if you want to

82
00:03:21,570 --> 00:03:23,490
load up a bunch of
tools and things like

83
00:03:23,490 --> 00:03:24,970
that. If you've got
very simple stuff, it's

84
00:03:24,970 --> 00:03:28,010
not. The point of all
this is there's a lot

85
00:03:28,010 --> 00:03:30,550
of resources
dedicated to a virtual

86
00:03:30,550 --> 00:03:34,770
machine because we're
virtualizing an entire

87
00:03:34,770 --> 00:03:42,190
machine. okay containers
are try to address

88
00:03:42,190 --> 00:03:44,730
this issue of how
much resources are

89
00:03:44,730 --> 00:03:46,920
available or needed to
run a virtual machine

90
00:03:46,920 --> 00:03:49,420
another example of
how much resources are

91
00:03:49,420 --> 00:03:51,830
required when you
launched your virtual

92
00:03:51,830 --> 00:03:54,510
machines it would
take anywhere from 30

93
00:03:54,510 --> 00:03:56,950
seconds some of you may
have taken upwards of

94
00:03:56,950 --> 00:03:58,430
three minutes to get
a virtual machine

95
00:03:58,430 --> 00:04:01,990
running on your on your
system okay that's a

96
00:04:01,990 --> 00:04:04,250
long time to get
something up and going,

97
00:04:04,710 --> 00:04:05,970
right? You're
essentially running a

98
00:04:05,970 --> 00:04:07,850
program, and it takes
three minutes for

99
00:04:07,850 --> 00:04:10,150
the program to be
ready, right? That's

100
00:04:10,150 --> 00:04:12,450
a long time for a lot
of work that we're

101
00:04:12,450 --> 00:04:13,150
doing, especially
when I'm doing

102
00:04:13,150 --> 00:04:14,730
software engineering
and testing and such.

103
00:04:14,930 --> 00:04:19,070
So containers are
sort of trying to

104
00:04:19,730 --> 00:04:21,850
address this as a
midway point. They're

105
00:04:21,850 --> 00:04:24,690
basically saying, well,
what if we don't start

106
00:04:24,690 --> 00:04:28,670
an entire machine up,
virtualized or not?

107
00:04:28,690 --> 00:04:32,070
Instead of starting an
entire machine, what do

108
00:04:32,070 --> 00:04:34,030
we really need to do
well what we really want

109
00:04:34,030 --> 00:04:37,770
to do is have a process
process of execution

110
00:04:37,770 --> 00:04:41,370
on some system but we
wanted that process

111
00:04:41,370 --> 00:04:44,370
to think that it's
running on a different

112
00:04:44,370 --> 00:04:47,890
machine okay and this
is essentially what

113
00:04:47,890 --> 00:04:52,170
containers do they um
provide an environment for

114
00:04:52,170 --> 00:04:55,730
your pro for your program
to run but they're

115
00:04:55,730 --> 00:04:58,630
wrapping it with
virtualization as if you

116
00:04:58,630 --> 00:05:01,720
were running on a on a
different machine but

117
00:05:01,720 --> 00:05:03,930
the way it's achieving
this is essentially

118
00:05:03,930 --> 00:05:06,810
just giving you a new
file system. How do you

119
00:05:06,810 --> 00:05:08,670
know which machine
that you're running on,

120
00:05:08,910 --> 00:05:12,050
right? You
connect to a name.

121
00:05:12,050 --> 00:05:13,910
If you SSH to a machine,

122
00:05:14,150 --> 00:05:16,570
you got to name a
machine. But once

123
00:05:16,570 --> 00:05:19,010
you got the shell,
how do you know what

124
00:05:19,010 --> 00:05:20,880
machine that you're
on? How can you

125
00:05:20,880 --> 00:05:21,990
verify that? Well,
we're going to do

126
00:05:21,990 --> 00:05:23,580
something and look
at the file system.

127
00:05:24,070 --> 00:05:26,890
Well, if I change
what your file system

128
00:05:26,890 --> 00:05:29,610
looks like underneath
you, I can give

129
00:05:29,610 --> 00:05:30,690
you the impression
that you're running

130
00:05:30,690 --> 00:05:33,110
on a completely
different system, right?

131
00:05:33,250 --> 00:05:35,410
And so this is
the basis of what

132
00:05:35,410 --> 00:05:37,490
containers are doing.
They're basically

133
00:05:37,490 --> 00:05:39,790
saying, we don't
have to set up a

134
00:05:39,790 --> 00:05:42,250
whole new, virtualize
a whole machine.

135
00:05:42,950 --> 00:05:44,770
All we have to do
is get a process

136
00:05:44,770 --> 00:05:47,870
running and virtualize
essentially the file

137
00:05:47,870 --> 00:05:50,470
system that it's
running under, okay?

138
00:05:50,470 --> 00:05:53,390
And we can give it a
different file system.

139
00:05:55,010 --> 00:05:57,070
Now, Docker is what
we're going to look

140
00:05:57,070 --> 00:05:59,010
at in particular as
a technology that

141
00:05:59,010 --> 00:06:01,390
does this, But
containers are around

142
00:06:01,390 --> 00:06:02,830
for lots of different
environments

143
00:06:02,830 --> 00:06:05,350
and lots of different
– well, basically,

144
00:06:05,350 --> 00:06:06,410
there's lots of
different containers

145
00:06:06,410 --> 00:06:08,550
out there and
container environments.

146
00:06:08,870 --> 00:06:10,710
You can do container
environments that

147
00:06:10,710 --> 00:06:13,130
are more generalized
like Docker, which

148
00:06:13,130 --> 00:06:16,590
generalizes
essentially the entire

149
00:06:16,590 --> 00:06:20,530
operating system,
especially in terms of

150
00:06:23,050 --> 00:06:25,850
Linux-type operating
systems and such.

151
00:06:26,470 --> 00:06:29,190
Or you can have
containers that have

152
00:06:29,190 --> 00:06:30,470
been around for
a while that are

153
00:06:30,470 --> 00:06:32,710
more specialized.
So, for instance,

154
00:06:32,870 --> 00:06:35,610
Java has a popular
container architecture

155
00:06:35,610 --> 00:06:38,050
called Tomcat. And
what it's for is

156
00:06:38,050 --> 00:06:40,190
to be able to drop
your Java applications

157
00:06:40,190 --> 00:06:42,890
into a Tomcat
environment. And the

158
00:06:42,890 --> 00:06:45,830
Tomcat will provide
all the resources

159
00:06:45,830 --> 00:06:47,950
or virtualize all
those resources around

160
00:06:47,950 --> 00:06:50,210
that your application
wants to use.

161
00:06:50,650 --> 00:06:51,850
So there's lots
of different

162
00:06:51,850 --> 00:06:53,010
container technologies.

163
00:06:53,330 --> 00:06:56,060
Docker is one
that's been widely

164
00:06:56,490 --> 00:06:59,830
adopted, has taken
off, and one that we're

165
00:06:59,830 --> 00:07:01,110
going to go ahead
and study as a

166
00:07:01,110 --> 00:07:03,990
particular implementation
of containers.

167
00:07:05,450 --> 00:07:10,230
And so a lot of
the examples we're

168
00:07:10,230 --> 00:07:12,530
going to be talking
about are containers.

169
00:07:12,530 --> 00:07:15,510
So they virtualize
the operating

170
00:07:15,510 --> 00:07:16,990
system itself.
Remember, with a virtual

171
00:07:16,990 --> 00:07:19,150
machine, we virtualize
the machine,

172
00:07:19,230 --> 00:07:21,490
and put a real
operating system

173
00:07:21,490 --> 00:07:23,950
in it, in the
virtual machine.

174
00:07:23,990 --> 00:07:25,710
Here, we're virtualizing,

175
00:07:25,710 --> 00:07:26,650
essentially
thinking of it as

176
00:07:26,650 --> 00:07:28,550
virtualizing the
operating system.

177
00:07:29,710 --> 00:07:32,230
Now, when we do this,
we are going to see

178
00:07:32,230 --> 00:07:33,510
some limitations
of this. We'll talk

179
00:07:33,510 --> 00:07:35,610
about the limitations
of containers in just

180
00:07:35,610 --> 00:07:37,870
a second. But they
have some incredible

181
00:07:37,870 --> 00:07:40,210
advantages to them.
The first biggest

182
00:07:40,210 --> 00:07:42,650
advantage of containers
is they are usually,

183
00:07:42,650 --> 00:07:46,490
especially containers
like Docker systems

184
00:07:46,490 --> 00:07:50,150
or the Docker
system for building

185
00:07:50,150 --> 00:07:52,850
containers, they're
incredibly lightweight.

186
00:07:52,850 --> 00:07:54,600
Okay, what do we
mean by lightweight?

187
00:07:54,610 --> 00:07:57,590
Well, lightweight
means usually the

188
00:07:57,590 --> 00:08:00,170
amount of resources
to install a

189
00:08:00,170 --> 00:08:03,330
container are pretty
small comparatively.

190
00:08:05,090 --> 00:08:06,810
said, if I'm going
to start up a virtual

191
00:08:06,810 --> 00:08:10,290
machine, I'm probably
going to have at least a

192
00:08:10,290 --> 00:08:14,690
gigabyte or two worth
of file system space

193
00:08:14,690 --> 00:08:18,870
for my virtual machine
disk image, probably

194
00:08:18,870 --> 00:08:21,110
even larger than that.
In other words, if you

195
00:08:21,110 --> 00:08:22,790
have a real machine
that comes up or a

196
00:08:22,790 --> 00:08:25,030
virtual machine that comes
up and it's got tools

197
00:08:25,030 --> 00:08:27,010
that you want to use
and everything, it

198
00:08:27,010 --> 00:08:30,330
can easily be 20 gigabytes
worth of storage to

199
00:08:30,330 --> 00:08:34,610
be able to do that
with a container often

200
00:08:34,730 --> 00:08:38,010
containers the size size
of those are measured

201
00:08:38,010 --> 00:08:41,730
in megabytes not
gigabytes um hundreds of

202
00:08:41,730 --> 00:08:44,910
giga megabytes for
large containers many

203
00:08:44,910 --> 00:08:47,640
containers are much much
smaller than that um

204
00:08:48,090 --> 00:08:51,470
so in terms of size
much smaller in terms of

205
00:08:51,470 --> 00:08:55,090
memory resources
we're going to see the

206
00:08:55,090 --> 00:08:57,390
containers are essentially
taking up as much

207
00:08:57,390 --> 00:09:00,210
memory as a single process
would take up. They

208
00:09:00,210 --> 00:09:02,830
don't have to reserve
two, three, four

209
00:09:02,830 --> 00:09:04,590
gigabytes worth of
memory to be able to do

210
00:09:04,590 --> 00:09:06,330
something interesting. A
lot of virtual machines

211
00:09:06,330 --> 00:09:08,350
may only do a gigabyte,
but they're still

212
00:09:08,350 --> 00:09:10,830
using up a whole gigabyte.
Typically, a process

213
00:09:10,830 --> 00:09:13,090
is going to use far,
far less than that,

214
00:09:13,350 --> 00:09:13,890
okay?

215
00:09:14,110 --> 00:09:15,690
Another big area
where we can

216
00:09:15,690 --> 00:09:16,990
see this in terms
of lightweight

217
00:09:16,990 --> 00:09:19,130
is how fast
containers come up.

218
00:09:19,150 --> 00:09:22,250
If I launch a VM,
I said earlier,

219
00:09:22,250 --> 00:09:24,650
30 seconds to maybe
three minutes,

220
00:09:24,770 --> 00:09:25,370
right?

221
00:09:25,770 --> 00:09:28,690
With containers,
it's not unusual for

222
00:09:28,690 --> 00:09:30,590
them to come up
in under a second.

223
00:09:31,440 --> 00:09:33,250
So you can have,
you get to the

224
00:09:33,250 --> 00:09:34,610
command and you'll
get the process

225
00:09:34,610 --> 00:09:36,930
running in under
a second, right?

226
00:09:38,480 --> 00:09:39,650
So there are
a lot of ways

227
00:09:39,650 --> 00:09:40,710
that they are
lightweight.

228
00:09:44,350 --> 00:09:46,730
Now, when you
run a container,

229
00:09:46,730 --> 00:09:48,500
and this is an
important thing,

230
00:09:49,210 --> 00:09:50,910
when you run a container,

231
00:09:51,010 --> 00:09:53,750
it is a single process

232
00:09:53,890 --> 00:09:56,130
running under
the host OS.

233
00:09:57,330 --> 00:09:59,730
Okay, it's one process.

234
00:10:00,020 --> 00:10:02,290
We're doing some
special things with that

235
00:10:02,290 --> 00:10:03,490
process, and we're going
to talk a little bit

236
00:10:03,490 --> 00:10:05,850
more about those,
but it's one process

237
00:10:05,850 --> 00:10:08,370
that's running when you
launch a container. We

238
00:10:08,370 --> 00:10:10,710
talk about containers
talking to each other

239
00:10:10,710 --> 00:10:13,270
and attaching to
containers and things like

240
00:10:13,270 --> 00:10:15,950
that. What we're still
talking about is one

241
00:10:15,950 --> 00:10:19,690
process that's running
under the host OS.

242
00:10:20,450 --> 00:10:23,150
When we talk about
virtual machines,

243
00:10:23,300 --> 00:10:26,270
yeah, there's a
process, which is the

244
00:10:26,270 --> 00:10:28,810
hypervisor that starts
the virtual machine, but

245
00:10:28,810 --> 00:10:31,130
typically that may
have several processes

246
00:10:31,130 --> 00:10:33,390
in and of itself.
And then inside that

247
00:10:33,390 --> 00:10:36,810
virtual machine, it's
virtualizing other

248
00:10:36,810 --> 00:10:39,130
processes as well. So
when you have a virtual

249
00:10:39,130 --> 00:10:40,990
machine, you can
log into it and get

250
00:10:40,990 --> 00:10:43,350
multiple process threads
and you can see them.

251
00:10:43,350 --> 00:10:45,410
We can log into a
virtual machine and run

252
00:10:45,410 --> 00:10:47,350
the PS command, for
instance, if we're

253
00:10:47,350 --> 00:10:50,350
running a Linux OS in
our virtual machine and

254
00:10:50,350 --> 00:10:52,210
see all the processes
running on that

255
00:10:52,210 --> 00:10:54,350
virtual machine. We can
interact with those,

256
00:10:54,570 --> 00:11:00,410
right? We are interacting
with the kernel of

257
00:11:00,410 --> 00:11:03,150
the operating system
on a virtual machine.

258
00:11:03,150 --> 00:11:05,250
So whatever capabilities
that particular

259
00:11:05,250 --> 00:11:08,690
kernel has on that
operating system on that

260
00:11:08,690 --> 00:11:11,670
virtual machine, our
process will have access to

261
00:11:11,670 --> 00:11:13,290
or a program can have
access to. We can

262
00:11:13,290 --> 00:11:16,370
learn multiple threads
and all kinds of stuff.

263
00:11:17,610 --> 00:11:19,770
When you're talking
about containers,

264
00:11:19,770 --> 00:11:21,250
especially Docker
containers,

265
00:11:21,490 --> 00:11:23,390
they're running
one process.

266
00:11:23,550 --> 00:11:25,610
They don't have
multiple processes.

267
00:11:26,070 --> 00:11:28,890
We'll show how we
can sort of get

268
00:11:28,890 --> 00:11:31,370
another process
attached to a container.

269
00:11:31,370 --> 00:11:32,710
It's not technically
attached.

270
00:11:33,130 --> 00:11:36,710
But we can give you
the – I'll show you how

271
00:11:36,710 --> 00:11:38,230
you can get the feel
that you've got another

272
00:11:38,230 --> 00:11:39,870
process running. But
if you ran the ps

273
00:11:39,870 --> 00:11:43,150
command inside your
container, you're not going

274
00:11:43,150 --> 00:11:45,200
to get a list of
processes back because

275
00:11:45,200 --> 00:11:46,970
there aren't a whole
bunch of processes. There

276
00:11:46,970 --> 00:11:49,950
will only show up
one because it's not

277
00:11:49,950 --> 00:11:51,750
running. Now, and the
other thing about this

278
00:11:51,750 --> 00:11:55,770
is that it's using,
as I said, the host OS

279
00:11:56,150 --> 00:12:00,270
is one hosting that is
running that process,

280
00:12:00,270 --> 00:12:02,790
which means that
whenever your container

281
00:12:02,790 --> 00:12:07,130
process wants to
access a kernel call, a

282
00:12:07,130 --> 00:12:10,230
system call, it's accessing
the system, the host

283
00:12:10,230 --> 00:12:12,410
system. Now, there's
some brokerage going

284
00:12:12,410 --> 00:12:16,190
on with the – there is
a daemon that starts

285
00:12:16,190 --> 00:12:18,710
up your Docker container,
and it sets some

286
00:12:18,710 --> 00:12:21,710
limitations on that
process when it runs.

287
00:12:22,590 --> 00:12:24,810
So there are some
things preventing that,

288
00:12:24,810 --> 00:12:27,080
but it's a very
different environment

289
00:12:27,370 --> 00:12:30,950
from a process perspective,
right? When you

290
00:12:30,950 --> 00:12:32,890
look at what's going
on inside a container,

291
00:12:32,890 --> 00:12:35,390
you don't see
what looks like an

292
00:12:35,390 --> 00:12:38,310
operating system. You
got the commands, you

293
00:12:38,310 --> 00:12:41,310
can do LS and lots of
other commands, you

294
00:12:41,310 --> 00:12:43,910
can do network commands
and other things,

295
00:12:43,910 --> 00:12:45,790
but when you take
a look at what the

296
00:12:45,790 --> 00:12:47,490
whole environment is
that you're running in,

297
00:12:47,490 --> 00:12:49,490
it doesn't look like
an operating system,

298
00:12:49,500 --> 00:12:51,890
because it's not an
operating system.

299
00:12:51,890 --> 00:12:53,770
Essentially, you're
running a single

300
00:12:53,770 --> 00:12:57,870
process with a version
of a file system

301
00:12:57,870 --> 00:12:59,710
that that container
wants that process

302
00:12:59,710 --> 00:13:02,250
to see that's
different than the OS.

303
00:13:04,150 --> 00:13:08,850
um and what we do is
uh now the container

304
00:13:08,850 --> 00:13:10,770
has its own version of
what the file system

305
00:13:10,770 --> 00:13:11,950
is we're going to
talk about that in a

306
00:13:11,950 --> 00:13:17,670
little bit but you
can map host os file

307
00:13:17,670 --> 00:13:20,110
systems into that
containers file system as

308
00:13:20,110 --> 00:13:22,330
well so there's a
way for us to sort of

309
00:13:22,330 --> 00:13:25,250
merge these two inside
a container now this

310
00:13:25,250 --> 00:13:28,390
also uh gives us some
nice advantages and

311
00:13:28,390 --> 00:13:30,050
when we're working
with virtual machines

312
00:13:30,050 --> 00:13:32,710
So some people had
some problems because

313
00:13:32,710 --> 00:13:34,930
Vagrant wasn't behaving
like it used to.

314
00:13:35,150 --> 00:13:37,230
When working with
the virtual machines,

315
00:13:37,230 --> 00:13:38,590
we didn't really
have a way for

316
00:13:38,590 --> 00:13:42,070
your virtual machine
and your host to

317
00:13:42,070 --> 00:13:44,410
communicate easily
between each other.

318
00:13:45,090 --> 00:13:47,530
Vagrant would set up
this slash Vagrant

319
00:13:47,530 --> 00:13:50,530
directory that would
be mapped to it.

320
00:13:50,530 --> 00:13:51,950
But actually, if you
take a look at what

321
00:13:51,950 --> 00:13:53,930
it's doing underneath
the covers, it's

322
00:13:53,930 --> 00:13:57,810
literally just
running a file sharing

323
00:13:57,810 --> 00:14:02,030
protocol on the virtual
machine and having

324
00:14:02,030 --> 00:14:04,610
that file sharing
protocol attached via

325
00:14:04,610 --> 00:14:07,470
the internal network
to your host OS.

326
00:14:07,470 --> 00:14:09,830
So these OSs are
not intimately

327
00:14:09,830 --> 00:14:12,350
connected together
in any kind of ways.

328
00:14:12,350 --> 00:14:14,310
We're just using
standard network file

329
00:14:14,310 --> 00:14:17,070
sharing to give
you a directory on

330
00:14:17,070 --> 00:14:21,130
your VM that mapped
into your host OS,

331
00:14:21,690 --> 00:14:22,230
okay?

332
00:14:22,290 --> 00:14:26,550
When we're doing running
containers, the file

333
00:14:26,550 --> 00:14:28,650
system that the
container sees is sitting

334
00:14:28,650 --> 00:14:32,370
in the host OS, and
we can easily attach

335
00:14:32,370 --> 00:14:36,040
other directories and
such from the host OS to

336
00:14:36,040 --> 00:14:38,590
that version of the file
system. It's a much,

337
00:14:38,590 --> 00:14:40,850
much more integrated
way of doing things

338
00:14:40,850 --> 00:14:43,310
that has advantages and
disadvantages to it.

339
00:14:43,870 --> 00:14:46,370
And the biggest thing
is whenever we are

340
00:14:46,370 --> 00:14:49,970
doing a system call
or want to call to

341
00:14:49,970 --> 00:14:53,750
the resources of the
kernel to do anything,

342
00:14:53,750 --> 00:14:56,510
it's going to be
the host OS's kernel

343
00:14:56,510 --> 00:14:59,110
that's responding to
it. It's not going

344
00:14:59,110 --> 00:15:03,550
to be a different
operating system running

345
00:15:03,550 --> 00:15:06,230
in a virtual machine
that's doing it.

346
00:15:06,910 --> 00:15:09,570
which means I can't run.

347
00:15:09,570 --> 00:15:10,900
When I run a container,

348
00:15:10,930 --> 00:15:13,070
the process
has to be able

349
00:15:13,070 --> 00:15:15,160
to run on my
host OS already.

350
00:15:16,940 --> 00:15:18,490
In other words, I
should be able to

351
00:15:18,490 --> 00:15:20,530
take that process
and maybe have to get

352
00:15:20,530 --> 00:15:21,870
additional libraries
or other kinds

353
00:15:21,870 --> 00:15:25,510
of dependencies
resolved on my host OS,

354
00:15:25,510 --> 00:15:27,670
but the process
inside the container

355
00:15:28,430 --> 00:15:30,990
needs to be able to
run on the host OS,

356
00:15:30,990 --> 00:15:32,410
provided it's got
all those additional

357
00:15:32,410 --> 00:15:34,610
resources available
to it in the host OS.

358
00:15:35,170 --> 00:15:36,350
That's not the same thing

359
00:15:36,350 --> 00:15:37,430
with a virtual machine.

360
00:15:37,730 --> 00:15:39,350
Remember, a virtual
machine, I can

361
00:15:39,350 --> 00:15:41,130
launch a completely
different OS.

362
00:15:41,910 --> 00:15:44,710
So I can be on
my Mac, launch

363
00:15:44,710 --> 00:15:46,350
a virtual machine
for Windows,

364
00:15:46,430 --> 00:15:48,030
and run programs that are

365
00:15:48,030 --> 00:15:49,890
compiled and
built for Windows.

366
00:15:50,690 --> 00:15:51,530
Right?

367
00:15:51,890 --> 00:15:54,110
If I run a container,

368
00:15:55,690 --> 00:15:58,350
processes I run in
that container would

369
00:15:58,350 --> 00:16:00,130
have to be able to
run on my Mac as well.

370
00:16:00,930 --> 00:16:04,430
Right? Because it's
using the host OS's

371
00:16:04,430 --> 00:16:05,890
system. Does this
make sense, everyone?

372
00:16:06,390 --> 00:16:07,980
These are some of
the fundamental

373
00:16:07,980 --> 00:16:09,390
limitations. So
that means typically

374
00:16:09,390 --> 00:16:11,300
when we're running
a container,

375
00:16:11,490 --> 00:16:13,630
especially Docker
containers, these are

376
00:16:13,630 --> 00:16:15,290
Linux environments
that they're running,

377
00:16:15,290 --> 00:16:16,830
we're running under
a Linux system.

378
00:16:18,130 --> 00:16:21,450
Now, we have a
product called Docker

379
00:16:21,450 --> 00:16:23,650
for Windows and
Docker for Mac. When

380
00:16:23,650 --> 00:16:26,270
you install these,
what they literally

381
00:16:26,270 --> 00:16:28,150
do is they create
a small virtual

382
00:16:28,150 --> 00:16:31,530
machine, a small
virtual Linux machine.

383
00:16:31,530 --> 00:16:33,550
So even though you're
running Windows,

384
00:16:33,810 --> 00:16:36,450
it brings up a small
Linux virtual machine

385
00:16:36,450 --> 00:16:39,490
and runs your Docker
containers in that. It

386
00:16:39,830 --> 00:16:44,030
uses the Linux OS of the
small virtual machine

387
00:16:44,320 --> 00:16:45,750
and then says, okay,
I'm going to run a

388
00:16:45,750 --> 00:16:48,070
process in there as a
container inside that.

389
00:16:48,070 --> 00:16:50,970
That's the way Docker
for Windows works.

390
00:16:50,970 --> 00:16:53,310
It's the same way that
Docker for Mac works.

391
00:16:53,470 --> 00:16:55,330
If you install
Docker on a Linux

392
00:16:55,330 --> 00:16:57,090
system, though, it
doesn't have to run

393
00:16:57,090 --> 00:16:58,810
a little tiny virtual
machine. It can

394
00:16:58,810 --> 00:17:02,670
use the underlying
Linux OS directly.

395
00:17:02,670 --> 00:17:03,570
Does this make
sense to everyone?

396
00:17:04,690 --> 00:17:06,830
So this is one of
the big differences

397
00:17:06,830 --> 00:17:08,630
between containers
and virtual

398
00:17:08,630 --> 00:17:10,430
machines. They're
not the same thing.

399
00:17:11,410 --> 00:17:14,330
At a casual glance,
they can look the

400
00:17:14,330 --> 00:17:19,470
same, and at a
casual and a very

401
00:17:19,470 --> 00:17:21,510
superficial kind of
comparison between

402
00:17:21,510 --> 00:17:23,490
virtual machines and
containers, one could

403
00:17:23,490 --> 00:17:25,730
say, well, they
do the same thing.

404
00:17:25,810 --> 00:17:28,010
They function in many
of the same respects,

405
00:17:28,010 --> 00:17:30,640
but they do have
these limitations that

406
00:17:30,850 --> 00:17:33,330
we have to understand
about what a container

407
00:17:33,330 --> 00:17:35,090
can or can't do and
what it is and what

408
00:17:35,090 --> 00:17:37,830
it isn't compared to
a virtual machine.

409
00:17:37,850 --> 00:17:41,460
However, these
lightweight notions

410
00:17:41,490 --> 00:17:43,470
that it's really
quick and easy to get

411
00:17:43,470 --> 00:17:45,010
these things up
and running, and

412
00:17:45,010 --> 00:17:48,890
they're still very
portable, is helpful.

413
00:17:48,890 --> 00:17:52,470
So let's talk about
Docker in particular.

414
00:17:52,530 --> 00:17:54,210
Docker's been around
for a while. Well,

415
00:17:54,630 --> 00:17:57,670
Docker is based
on the Linux OS.

416
00:17:57,670 --> 00:18:01,830
It depends on a
couple features in

417
00:18:01,830 --> 00:18:03,910
the Linux kernel
in particular.

418
00:18:04,010 --> 00:18:07,870
One of those is
a capability in

419
00:18:07,870 --> 00:18:09,580
the Linux kernel
called Cgroups.

420
00:18:09,610 --> 00:18:14,690
Cgroups allows a
process or a root

421
00:18:14,690 --> 00:18:18,480
process to be able
to coordinate another

422
00:18:18,660 --> 00:18:20,870
process or a group
of process and be

423
00:18:20,870 --> 00:18:22,870
able to limit things
like CPU, memory,

424
00:18:22,870 --> 00:18:26,270
and other kinds of
resources to those

425
00:18:26,650 --> 00:18:28,950
processes in what's
called a C group.

426
00:18:28,950 --> 00:18:32,970
So one of the things
that – the way that

427
00:18:32,970 --> 00:18:35,990
Docker works is it has
– I mentioned, made

428
00:18:35,990 --> 00:18:38,330
reference that it
has its own Docker

429
00:18:38,330 --> 00:18:40,210
daemon that coordinates
the launching of

430
00:18:40,210 --> 00:18:42,510
the containers and
shutting containers down.

431
00:18:42,510 --> 00:18:44,370
It's basically starting
these processes

432
00:18:44,370 --> 00:18:45,970
that I was talking
about. A container is

433
00:18:45,970 --> 00:18:48,050
a process. So it's
the one responsible

434
00:18:48,050 --> 00:18:50,050
for starting that
process and everything.

435
00:18:52,570 --> 00:18:56,570
and it starts those
under C groups so that

436
00:18:56,570 --> 00:19:00,150
it can have that
control or prescribed

437
00:19:00,450 --> 00:19:02,090
parameters that the
kernel is going to

438
00:19:02,090 --> 00:19:05,350
enforce for the Docker
daemon on how that

439
00:19:05,350 --> 00:19:07,930
container is going
to work in terms of

440
00:19:07,930 --> 00:19:09,670
limitations and things
like that. The other

441
00:19:09,670 --> 00:19:12,010
thing that they
rely on for Linux is

442
00:19:12,010 --> 00:19:14,110
Linux has this command
called change root.

443
00:19:14,560 --> 00:19:15,990
Change root is kind
of an interesting

444
00:19:15,990 --> 00:19:18,920
command. Again, it's
only available to root

445
00:19:18,920 --> 00:19:20,550
access that you have to
be a system administrator

446
00:19:20,550 --> 00:19:22,750
on your Linux system
to use this. But

447
00:19:22,750 --> 00:19:25,290
change root allows
you to start a process

448
00:19:26,310 --> 00:19:28,310
and change its perception

449
00:19:28,310 --> 00:19:29,610
of the file system.

450
00:19:30,530 --> 00:19:32,390
Change root, the
reason why we

451
00:19:32,390 --> 00:19:33,670
call it change
root is because

452
00:19:33,670 --> 00:19:35,470
normally when you
launch a process,

453
00:19:35,590 --> 00:19:38,910
you see the root of
the OS's file system as

454
00:19:38,910 --> 00:19:40,930
the root of your file
system. And so you can

455
00:19:40,930 --> 00:19:43,490
start at the OS and
go down to slash USR,

456
00:19:44,030 --> 00:19:46,190
slash bin, for instance,
to find commands.

457
00:19:46,190 --> 00:19:49,130
You can go slash home,
slash cipher, for

458
00:19:49,130 --> 00:19:51,110
instance, on my system
to find my account and

459
00:19:51,110 --> 00:19:54,210
so forth, right? When
you use change root

460
00:19:54,210 --> 00:19:57,310
to launch a process,
what you're doing is

461
00:19:57,310 --> 00:20:00,290
telling the process,
no, no, don't use the

462
00:20:00,290 --> 00:20:03,630
slash at the top of
the real file system.

463
00:20:03,830 --> 00:20:06,430
Use some other
directory inside the

464
00:20:06,430 --> 00:20:08,330
file system and
treat that as root.

465
00:20:09,130 --> 00:20:12,030
Now, it's the kernel
that does this. So

466
00:20:12,030 --> 00:20:15,370
change root is a command
that has to be done

467
00:20:15,370 --> 00:20:18,350
by the super user.
The Docker daemon runs

468
00:20:18,350 --> 00:20:21,230
as the super user
when you start it up.

469
00:20:21,230 --> 00:20:23,770
And so it has access
to this change root

470
00:20:23,770 --> 00:20:25,470
capability. And so
when it launches the

471
00:20:25,470 --> 00:20:28,350
container processes,
it literally changes

472
00:20:28,350 --> 00:20:31,670
what they see as their
root when they're

473
00:20:31,670 --> 00:20:33,450
launching. And this
is a critical thing.

474
00:20:33,610 --> 00:20:34,450
Okay.

475
00:20:34,450 --> 00:20:35,650
Does this make
sense to everyone?

476
00:20:35,870 --> 00:20:36,670
Right?

477
00:20:39,080 --> 00:20:41,150
So change root is kind
of a cool thing. You

478
00:20:41,150 --> 00:20:44,530
can use it for
doing some – system

479
00:20:44,530 --> 00:20:46,730
administrators have been
using it for years to

480
00:20:46,730 --> 00:20:48,170
do certain things,
like when you would log

481
00:20:48,170 --> 00:20:50,730
into a system, say, as
anonymous or something

482
00:20:50,730 --> 00:20:52,530
like that, or some
kind of process that

483
00:20:52,530 --> 00:20:55,270
was allowing to log
into a system, they

484
00:20:55,270 --> 00:20:58,090
would often change
route that process so

485
00:20:58,090 --> 00:21:01,210
that if you logged
in, you would get the

486
00:21:01,210 --> 00:21:03,720
route that was
defined by the system

487
00:21:03,720 --> 00:21:06,370
administrator, which would
often be a directory.

488
00:21:07,690 --> 00:21:09,650
and it would
often be very

489
00:21:09,650 --> 00:21:11,270
limited in terms
of what it has

490
00:21:12,450 --> 00:21:14,890
but Docker takes
advantage of it to

491
00:21:14,890 --> 00:21:17,170
use this as I mentioned
before there's

492
00:21:17,170 --> 00:21:18,950
versions for
Windows and Mac OS

493
00:21:19,590 --> 00:21:21,130
when you install
and run these

494
00:21:21,130 --> 00:21:22,550
I'll demonstrate
the Mac OS

495
00:21:22,550 --> 00:21:24,590
version here in
just a second

496
00:21:24,980 --> 00:21:27,050
like I said they
go ahead and

497
00:21:27,050 --> 00:21:29,000
create their own
small little Linux

498
00:21:29,830 --> 00:21:32,050
VM for running
the containers

499
00:21:32,490 --> 00:21:36,410
and then and the
Docker daemon running

500
00:21:36,410 --> 00:21:38,510
in Windows or Mac
OS then controls all

501
00:21:38,510 --> 00:21:41,450
the container
processes that are run.

502
00:21:42,830 --> 00:21:43,970
Excuse me.

503
00:21:46,110 --> 00:21:49,590
So Docker installs as
a daemon process on

504
00:21:49,590 --> 00:21:52,210
your OS. So if you
install it under Mac OS

505
00:21:52,210 --> 00:21:54,410
or Windows OS, it's
going to have to have

506
00:21:54,410 --> 00:21:57,950
root authority to
execute your programs.

507
00:21:57,950 --> 00:21:59,990
If you install it in
Linux environment, And

508
00:21:59,990 --> 00:22:04,770
you need to install
it to launch as root.

509
00:22:05,190 --> 00:22:08,210
So it's typically
installed as a, well,

510
00:22:08,210 --> 00:22:09,730
it's a daemon process.
So we typically

511
00:22:09,730 --> 00:22:12,250
set it up to the
daemon process to

512
00:22:12,250 --> 00:22:14,970
launch when we start
our Linux system.

513
00:22:15,410 --> 00:22:17,650
And then, as I
mentioned before, the

514
00:22:17,650 --> 00:22:20,380
daemon starts a
subprocess for each

515
00:22:20,380 --> 00:22:23,110
container that
you ask it to run.

516
00:22:26,170 --> 00:22:28,910
So we'll take a look
at some containers

517
00:22:28,910 --> 00:22:31,750
in just a second. So
how do we get containers

518
00:22:31,750 --> 00:22:36,030
though? Well, containers
come from what

519
00:22:36,030 --> 00:22:38,270
we call container
images or Docker anyways

520
00:22:38,270 --> 00:22:41,850
does this. And what
a container image

521
00:22:41,850 --> 00:22:46,550
is, is essentially
the container image is

522
00:22:46,550 --> 00:22:55,550
a, well, first of
all, it is a combined

523
00:22:55,670 --> 00:22:58,750
file object. It's one
file for the container

524
00:22:58,750 --> 00:23:00,490
image, but it's got
multiple components

525
00:23:00,490 --> 00:23:03,650
in it. And one of
those components is a

526
00:23:03,650 --> 00:23:06,930
file that represents
the file system that

527
00:23:06,930 --> 00:23:09,190
you want your container
process to see.

528
00:23:09,270 --> 00:23:10,910
It's the version
of the file

529
00:23:10,910 --> 00:23:12,330
system that you
want it to see.

530
00:23:12,610 --> 00:23:13,490
Okay?

531
00:23:13,910 --> 00:23:16,310
And it can be
as limited or

532
00:23:16,450 --> 00:23:18,310
expansive as you
want it to be.

533
00:23:18,400 --> 00:23:20,230
But you're going
to copy all the

534
00:23:20,230 --> 00:23:22,630
files that you want
your container to

535
00:23:22,630 --> 00:23:25,750
be able to see into
this image file.

536
00:23:25,750 --> 00:23:26,610
Okay?

537
00:23:26,840 --> 00:23:28,950
And we do it in a
particular way and

538
00:23:28,950 --> 00:23:31,550
such. And, shoot,
sorry about that.

539
00:23:32,730 --> 00:23:34,450
I keep forgetting
to upgrade

540
00:23:34,450 --> 00:23:36,890
my firewall
and my laptop.

541
00:23:38,760 --> 00:23:39,910
Where was I?

542
00:23:39,910 --> 00:23:42,590
Docker files. Oh,
yeah. So it builds up

543
00:23:42,590 --> 00:23:46,770
this image file,
and then some other

544
00:23:46,770 --> 00:23:49,770
associated information
goes into the image.

545
00:23:49,830 --> 00:23:54,110
And that's what the
Docker daemon needs to

546
00:23:54,110 --> 00:23:56,230
have access to. It
says, okay, I need to

547
00:23:56,230 --> 00:23:58,390
know which image,
when you go to run a

548
00:23:58,390 --> 00:24:01,450
container, you have to
tell it which image or

549
00:24:01,450 --> 00:24:04,530
Docker container image
that you want to use.

550
00:24:04,710 --> 00:24:06,890
So when we talk
about a container,

551
00:24:06,890 --> 00:24:08,690
typically when we talk
about a container, what

552
00:24:08,690 --> 00:24:10,590
we actually mean is
a running instance

553
00:24:10,590 --> 00:24:14,450
of a particular
container image, okay?

554
00:24:14,510 --> 00:24:16,760
We use the term a little
bit interchangeably,

555
00:24:16,770 --> 00:24:18,210
so sometimes we
mean a little

556
00:24:18,210 --> 00:24:20,630
bit more generically
as the image itself,

557
00:24:20,630 --> 00:24:22,190
But oftentimes
when we refer to a

558
00:24:22,190 --> 00:24:24,470
container, we're
referring to it as a

559
00:24:24,470 --> 00:24:27,790
particular running
instance of a container.

560
00:24:30,080 --> 00:24:32,230
So how do we build
these images?

561
00:24:32,270 --> 00:24:35,410
Well, we have a
command called Docker

562
00:24:35,410 --> 00:24:38,410
build that will
build images for us.

563
00:24:38,410 --> 00:24:40,790
But it needs a set
of instructions on

564
00:24:40,790 --> 00:24:43,210
how to build that
image. And that is

565
00:24:43,210 --> 00:24:44,710
called a Docker
file. So when you run

566
00:24:44,710 --> 00:24:48,050
Docker build, you
specify the location of

567
00:24:48,050 --> 00:24:49,890
a Docker file that
contains all the

568
00:24:49,890 --> 00:24:51,630
instructions for how
to build that image.

569
00:24:52,660 --> 00:24:54,790
Now, when you take a
look at it, I'll take

570
00:24:54,790 --> 00:24:56,230
a look at the Docker
file in just a second

571
00:24:56,230 --> 00:24:58,250
here. When you have a
Docker file, there's

572
00:24:58,250 --> 00:25:00,010
a series of commands
to it. And each

573
00:25:00,010 --> 00:25:02,230
one of those commands,
more or less, is

574
00:25:02,550 --> 00:25:05,490
essentially going to
build a layer. One of

575
00:25:05,490 --> 00:25:08,470
the things about Docker
images is that they're

576
00:25:09,000 --> 00:25:12,810
what they call a
unified file system.

577
00:25:12,870 --> 00:25:14,790
They build their file

578
00:25:14,790 --> 00:25:16,610
system image in layers.

579
00:25:16,690 --> 00:25:20,450
So you'll copy some
files onto that

580
00:25:20,450 --> 00:25:23,710
image, and that forms
a layer. And then

581
00:25:23,710 --> 00:25:25,950
if you do some more
changes to files

582
00:25:25,950 --> 00:25:27,810
on an image, that's
another layer.

583
00:25:27,830 --> 00:25:29,670
And then there can
be a third layer, a

584
00:25:29,670 --> 00:25:30,730
fourth layer, a
fifth layer, and you

585
00:25:30,730 --> 00:25:32,450
can have as many
layers as you want to.

586
00:25:32,690 --> 00:25:35,530
The reason why they
do this is there are

587
00:25:35,530 --> 00:25:37,230
a bunch of layers,
but it's sort of like

588
00:25:37,230 --> 00:25:44,550
when you're working with
graphic design tools

589
00:25:44,550 --> 00:25:46,830
and such. They will
typically allow you

590
00:25:46,830 --> 00:25:49,430
to create layers of
images, and then they

591
00:25:49,430 --> 00:25:52,590
show you the view
as all those images

592
00:25:52,590 --> 00:25:54,310
smash together so that
you can see the one

593
00:25:54,310 --> 00:25:56,130
on top of each other.
This is essentially

594
00:25:56,130 --> 00:25:58,550
what happens with our
file system layers

595
00:25:58,550 --> 00:26:00,690
when we're building
a Docker file. We lay

596
00:26:00,690 --> 00:26:03,190
one down, we lay another
one, And the image

597
00:26:03,190 --> 00:26:05,930
that we eventually
see is the combination

598
00:26:05,930 --> 00:26:07,750
of all those layers
smashed together, the

599
00:26:07,750 --> 00:26:10,190
results of all those
when they're done.

600
00:26:10,290 --> 00:26:13,410
The reason why we
do this, though, and

601
00:26:13,410 --> 00:26:14,430
I'll demonstrate
this to you in a

602
00:26:14,430 --> 00:26:17,770
little bit, is it
saves a bunch of time.

603
00:26:17,770 --> 00:26:19,610
If we make a
change to our

604
00:26:19,610 --> 00:26:20,630
Docker file, we
want to make a

605
00:26:20,630 --> 00:26:22,400
change to how
that image works.

606
00:26:22,770 --> 00:26:25,890
If we're building up
each layer, the other

607
00:26:25,890 --> 00:26:27,670
neat thing about the
way they do that is

608
00:26:27,670 --> 00:26:33,360
it can detect which
layers it needs to

609
00:26:33,360 --> 00:26:36,350
rebuild for the changes
that you made in

610
00:26:36,350 --> 00:26:38,190
the Docker file. So
if it doesn't have to

611
00:26:38,190 --> 00:26:40,170
rebuild certain layers
because you didn't

612
00:26:40,170 --> 00:26:42,050
make any changes that
would affect them,

613
00:26:42,670 --> 00:26:45,210
Docker automatically
picks it up and speeds

614
00:26:45,210 --> 00:26:48,070
up the build process
so that our image

615
00:26:48,070 --> 00:26:50,130
doesn't take nearly
as long to build if

616
00:26:50,130 --> 00:26:52,290
we're making small
changes as opposed to

617
00:26:52,290 --> 00:26:53,870
the very first time
we build our image.

618
00:26:55,890 --> 00:26:59,890
And so that's what
this Dockerfile does.

619
00:26:59,890 --> 00:27:01,670
And then finally,
we do some setups on

620
00:27:01,670 --> 00:27:03,790
the Dockerfile. Usually,
you have a Dockerfile

621
00:27:03,790 --> 00:27:07,070
that builds up the
image in terms of

622
00:27:07,070 --> 00:27:09,570
some various directives.
And then there's

623
00:27:09,570 --> 00:27:11,350
some directives
usually about running

624
00:27:11,350 --> 00:27:14,910
the program that you
want in that process.

625
00:27:21,610 --> 00:27:23,830
So the other thing
about the Dockerfiles,

626
00:27:23,830 --> 00:27:25,690
they not only build the
image, they build up

627
00:27:25,690 --> 00:27:28,410
the environment that
your process is going to

628
00:27:28,410 --> 00:27:31,900
run. So you can set
up initial environment

629
00:27:32,310 --> 00:27:34,810
variables that you
want access to. You can

630
00:27:34,810 --> 00:27:40,570
set up some other
capabilities or information

631
00:27:40,570 --> 00:27:43,400
for the process that
runs inside the container

632
00:27:43,400 --> 00:27:46,310
when it launches
that container image.

633
00:27:48,070 --> 00:27:50,470
When you're building
container images,

634
00:27:50,530 --> 00:27:53,730
typically we don't build
them from scratch. We

635
00:27:53,730 --> 00:27:58,470
usually will start with
a base image. um and

636
00:27:59,000 --> 00:28:02,190
there's lots of base
images uh available we'll

637
00:28:02,190 --> 00:28:04,190
talk about where you
get these base images

638
00:28:04,190 --> 00:28:08,430
in a second um from
the docker hub um but

639
00:28:09,790 --> 00:28:14,550
um you build them up
uh so there's a lot so

640
00:28:14,550 --> 00:28:17,510
you typically will use
a base image now um

641
00:28:17,580 --> 00:28:20,170
the images we're going
to use to demonstrate

642
00:28:20,170 --> 00:28:23,050
some things in here
are going to be Ubuntu

643
00:28:23,050 --> 00:28:26,230
images, okay? Very
similar to Ubuntu's with

644
00:28:26,230 --> 00:28:29,290
the OS that's running
on Silo. So when we use

645
00:28:29,290 --> 00:28:31,470
these images and pull
them in, we'll end up

646
00:28:31,470 --> 00:28:34,270
getting with a base
image that looks very

647
00:28:34,270 --> 00:28:36,190
similar to Silo. You'll
be able to see all

648
00:28:36,190 --> 00:28:38,250
the same command, many
of the same commands

649
00:28:38,250 --> 00:28:40,730
that you would use, you
could use on Silo, or

650
00:28:40,730 --> 00:28:43,370
a typical Linux installation
will be available

651
00:28:43,370 --> 00:28:45,370
inside of our containers
automatically.

652
00:28:45,710 --> 00:28:48,290
If we go into our
container, we have a

653
00:28:48,290 --> 00:28:49,970
shell in our container
we can go see and

654
00:28:49,970 --> 00:28:52,330
walk that file system
and see all the

655
00:28:52,330 --> 00:28:54,230
utilities and such that
would match up to what

656
00:28:54,230 --> 00:28:56,470
we would see in silo
however if you're

657
00:28:56,470 --> 00:29:01,770
building a generic
um ubuntu base image

658
00:29:02,030 --> 00:29:04,930
say ubuntu 22 as their
as your base image

659
00:29:04,930 --> 00:29:07,590
that base image does
not have things like

660
00:29:07,590 --> 00:29:10,650
developer tools in
it similar to when we

661
00:29:10,650 --> 00:29:15,910
launched our vms we
used ubuntu as our um um

662
00:29:15,910 --> 00:29:19,490
image that we were using
for our VM, it didn't

663
00:29:19,490 --> 00:29:21,510
have compilers and
other compilation

664
00:29:21,510 --> 00:29:24,770
tools installed, so we
had to do an APT install

665
00:29:24,770 --> 00:29:27,650
to get those tools
into our VM's image,

666
00:29:27,770 --> 00:29:32,430
or into our VM's
OS, and then we

667
00:29:32,430 --> 00:29:34,650
could do things
like build Angband.

668
00:29:35,270 --> 00:29:37,790
We could build Angband
inside a container,

669
00:29:38,040 --> 00:29:40,730
but if our base image
doesn't have all

670
00:29:40,730 --> 00:29:43,110
those tools, then
the image that we're

671
00:29:43,110 --> 00:29:48,410
going to use to build
Angband has to include

672
00:29:48,410 --> 00:29:50,650
all those tools,
okay? So we have to

673
00:29:50,650 --> 00:29:53,710
put those into those
layers. So we'll do a

674
00:29:53,710 --> 00:29:56,310
base of Ubuntu, and
then immediately after

675
00:29:56,310 --> 00:29:58,470
that, we'll do an
install of all these

676
00:29:58,870 --> 00:30:01,770
development tools
on that base image.

677
00:30:01,770 --> 00:30:03,230
And then we could
add additional

678
00:30:03,230 --> 00:30:05,670
stuff like another
layer for our

679
00:30:07,090 --> 00:30:09,250
repository and things
of that nature.

680
00:30:10,750 --> 00:30:16,550
now um when we are um
so we build these up

681
00:30:16,550 --> 00:30:20,830
off of base images now
ubuntu is a big base

682
00:30:20,830 --> 00:30:22,570
image though and it's
actually we don't

683
00:30:22,570 --> 00:30:24,770
typically build a lot
of containers that are

684
00:30:24,770 --> 00:30:27,010
built for deployment
testing development

685
00:30:27,010 --> 00:30:30,070
purposes and especially
in production

686
00:30:30,070 --> 00:30:32,830
environments we don't
typically use something like

687
00:30:32,830 --> 00:30:35,830
ubuntu as our base
image because it's got

688
00:30:35,830 --> 00:30:38,110
a whole bunch of stuff
that probably isn't

689
00:30:38,110 --> 00:30:40,110
actually going to be
used by our process.

690
00:30:40,350 --> 00:30:44,170
For instance, I could
install an OnBond onto

691
00:30:44,170 --> 00:30:47,350
a Ubuntu base image,
but an OnBond is

692
00:30:47,350 --> 00:30:50,250
never going to take
advantage of LS or move

693
00:30:50,250 --> 00:30:53,650
or dozens of other
commands and libraries

694
00:30:53,650 --> 00:30:56,070
that are available in
the base Ubuntu image.

695
00:30:56,090 --> 00:30:58,760
That's just wasted
space for my OnBond

696
00:30:58,760 --> 00:31:00,790
deployment. If all I
want to do is deploy,

697
00:31:00,790 --> 00:31:02,550
give you a container
that allows you to

698
00:31:02,550 --> 00:31:04,600
say, here, take this,
you can run OnBond

699
00:31:05,480 --> 00:31:06,950
and that's all you
got to do. You don't

700
00:31:06,950 --> 00:31:07,910
have to install
it. you don't have

701
00:31:07,910 --> 00:31:09,630
to compile it or
anything, just take this

702
00:31:09,630 --> 00:31:11,010
container and run
it, which I'm going

703
00:31:11,010 --> 00:31:12,310
to show you in a
second, we can do.

704
00:31:12,830 --> 00:31:14,730
We probably wouldn't
want to base it

705
00:31:14,730 --> 00:31:16,830
off of Ubuntu because
Ubuntu, like I

706
00:31:16,830 --> 00:31:18,390
said, has a whole
bunch of extra stuff

707
00:31:18,390 --> 00:31:20,270
that we don't need.
We definitely wouldn't

708
00:31:20,270 --> 00:31:24,490
want to give you
a container image

709
00:31:24,490 --> 00:31:28,290
that we had built
Ubuntu or Angband in.

710
00:31:28,290 --> 00:31:30,270
Because if we built
Angband in that

711
00:31:30,270 --> 00:31:32,950
container image, that
means we got to have a

712
00:31:32,950 --> 00:31:35,150
GCC compiler and all
the build tools in

713
00:31:35,150 --> 00:31:37,290
there as well. The
only time we ever need

714
00:31:37,290 --> 00:31:38,950
those are when we're
building Anban. We

715
00:31:38,950 --> 00:31:41,050
don't need it to run
it. So why would I

716
00:31:41,050 --> 00:31:44,550
hand all that stuff
to you just to run it?

717
00:31:44,550 --> 00:31:46,730
So typically, when
we're building

718
00:31:46,730 --> 00:31:48,630
containers,
especially for

719
00:31:48,630 --> 00:31:51,150
deployment purposes
and such, we wouldn't

720
00:31:51,150 --> 00:31:53,230
use Ubuntu as
our base image.

721
00:31:53,250 --> 00:31:56,290
We would use, there's
these very tiny,

722
00:31:56,610 --> 00:32:00,230
bare bones Linux images
that we can use as

723
00:32:00,230 --> 00:32:03,530
a base. Alpine is a
typical one. It has

724
00:32:03,530 --> 00:32:08,810
the minimal amount
of library tools that

725
00:32:08,810 --> 00:32:12,290
you would expect for
a Linux environment.

726
00:32:12,710 --> 00:32:15,170
And it's very,
very small, less

727
00:32:15,170 --> 00:32:17,550
than, I think
it's around 20

728
00:32:17,550 --> 00:32:19,290
megabytes or
something like that.

729
00:32:19,420 --> 00:32:21,470
Now, if you use that
as a base image, it's

730
00:32:21,470 --> 00:32:24,410
great in terms of size
and everything. But

731
00:32:24,410 --> 00:32:26,590
it's got a problem,
which is it doesn't have

732
00:32:26,590 --> 00:32:28,290
all the tools that
you expect. So if you

733
00:32:28,290 --> 00:32:30,330
try to run a shell,
first of all, you might

734
00:32:30,330 --> 00:32:31,830
not even be able to
run a shell inside your

735
00:32:31,830 --> 00:32:32,830
container. You might
be able to run your

736
00:32:32,830 --> 00:32:35,610
OnBond, but nothing else
inside the container,

737
00:32:36,270 --> 00:32:36,810
okay?

738
00:32:37,550 --> 00:32:39,990
And if you do have a
shell, you might not

739
00:32:39,990 --> 00:32:42,350
have, like, the move
command or other commands

740
00:32:42,350 --> 00:32:44,230
that you would expect
to find, right? You

741
00:32:44,230 --> 00:32:46,550
have to install those.
So we have to run this

742
00:32:46,550 --> 00:32:49,870
sort of game of
figuring out, okay, how

743
00:32:49,870 --> 00:32:53,230
much do we actually
need to be able to, A,

744
00:32:53,230 --> 00:32:55,450
run our process, and,
B, actually figure out

745
00:32:55,450 --> 00:32:57,610
that our process is
running correctly in there

746
00:32:57,610 --> 00:33:01,190
versus a full Ubuntu
environment, right?

747
00:33:01,410 --> 00:33:03,630
So this is one of
the first questions

748
00:33:03,630 --> 00:33:05,450
we always make
is, which base

749
00:33:05,450 --> 00:33:06,850
environment do we
want to build from?

750
00:33:08,250 --> 00:33:10,910
We can then use the
Dockerfile directives

751
00:33:10,910 --> 00:33:12,770
to install additional
things. The other

752
00:33:12,770 --> 00:33:13,830
thing I'm going to
point out is that we

753
00:33:13,830 --> 00:33:15,910
can actually build
a couple images. We

754
00:33:15,910 --> 00:33:17,800
can have what we call
multi-stage builds.

755
00:33:17,800 --> 00:33:20,610
So we can build an
image with a whole bunch

756
00:33:20,610 --> 00:33:23,750
of stuff, stuff that
we need, and then

757
00:33:23,750 --> 00:33:28,090
build another image
that we can copy things

758
00:33:28,090 --> 00:33:29,510
from that other one.
So we're going to build

759
00:33:29,510 --> 00:33:32,630
an image that we, say,
do compile on BondIn

760
00:33:32,630 --> 00:33:35,050
with all of our tools
and such, and then

761
00:33:35,050 --> 00:33:37,450
build another image
and just copy into that

762
00:33:37,450 --> 00:33:40,190
second image everything
that we need. And

763
00:33:40,190 --> 00:33:41,790
that second image is
the one that's actually

764
00:33:41,790 --> 00:33:44,690
then given away as
part of the container.

765
00:33:45,790 --> 00:33:47,070
We'll talk about that

766
00:33:47,070 --> 00:33:48,310
probably on
Monday, though.

767
00:33:48,650 --> 00:33:50,250
Environment
variables, user

768
00:33:50,250 --> 00:33:51,830
settings, port mappings.

769
00:33:51,830 --> 00:33:53,750
One of the beautiful
things about containers,

770
00:33:53,750 --> 00:33:55,230
this is a hallmark,
one of the other

771
00:33:55,230 --> 00:33:57,550
hallmarks of containers.
When you're building a

772
00:33:57,550 --> 00:34:00,870
container, the rule of
thumb about building

773
00:34:00,870 --> 00:34:03,290
containers is that you
build a container to

774
00:34:03,290 --> 00:34:06,490
do one thing and one
thing very, very well,

775
00:34:06,910 --> 00:34:09,950
and just the one thing.

776
00:34:10,030 --> 00:34:12,730
And then if your
application needs

777
00:34:12,730 --> 00:34:15,270
other things that
need to go on, don't

778
00:34:15,270 --> 00:34:17,030
pile them into the
same container.

779
00:34:17,070 --> 00:34:19,710
Start up other
containers and have

780
00:34:19,710 --> 00:34:21,550
the containers
talk to each other.

781
00:34:21,550 --> 00:34:23,370
This is a typical
way that we do

782
00:34:23,370 --> 00:34:24,450
things, but they're
going to talk to

783
00:34:24,450 --> 00:34:26,150
each other over
networking protocols.

784
00:34:26,300 --> 00:34:28,210
So one of the things
we have to do is know

785
00:34:28,210 --> 00:34:29,520
something about how
those networking

786
00:34:29,520 --> 00:34:31,910
protocols work, hence
the reason why we're

787
00:34:31,910 --> 00:34:33,710
talking about data
networks for a while.

788
00:34:33,870 --> 00:34:37,130
And when we talk about
port mappings, you'll

789
00:34:37,130 --> 00:34:38,990
understand, oh,
ports, those are the

790
00:34:38,990 --> 00:34:41,090
things that say which
application something

791
00:34:41,090 --> 00:34:43,530
goes to. And so
hopefully this will start

792
00:34:43,530 --> 00:34:44,650
to have a little bit
more meaning to you

793
00:34:44,650 --> 00:34:47,290
when we talk about how
port mappings work.

794
00:34:47,290 --> 00:34:49,620
We'll talk about that
in a second because

795
00:34:49,620 --> 00:34:51,890
we have to understand
what a port means

796
00:34:51,890 --> 00:34:54,090
inside the container's
perspective versus a

797
00:34:54,090 --> 00:34:57,050
port looking from
outside the container.

798
00:34:58,930 --> 00:35:01,090
And then also we
have a similar thing,

799
00:35:01,090 --> 00:35:02,970
as I mentioned
already. We can take

800
00:35:02,970 --> 00:35:05,990
local file systems
on the host OS and

801
00:35:05,990 --> 00:35:08,150
expose those and
sort of blend those

802
00:35:08,150 --> 00:35:12,810
into the container's
image of the file

803
00:35:12,810 --> 00:35:15,130
system so we can
get this mixed view.

804
00:35:15,550 --> 00:35:18,130
What's nice about that
is your container has

805
00:35:18,130 --> 00:35:20,090
a fixed image that your
process knows about,

806
00:35:20,090 --> 00:35:24,430
And then you can
expose portions of your

807
00:35:24,430 --> 00:35:28,250
host OS's file system
to the container for

808
00:35:28,250 --> 00:35:30,470
things like runtime
configuration information

809
00:35:30,470 --> 00:35:32,370
or runtime kinds of
things. In other words,

810
00:35:32,370 --> 00:35:34,210
here's a container that
generally will work

811
00:35:34,210 --> 00:35:36,780
on some kind of set
of files or something,

812
00:35:36,780 --> 00:35:39,050
but I want it to work
on my set of files, not

813
00:35:39,050 --> 00:35:41,170
the ones inside the
container. So I can run

814
00:35:41,170 --> 00:35:42,890
the container to work
on a set of files and

815
00:35:42,890 --> 00:35:46,130
then map a directory
from my host OS that

816
00:35:46,130 --> 00:35:47,670
contains the files I
want the container to

817
00:35:47,670 --> 00:35:50,990
work on. So we'll show
some examples of that.

818
00:35:51,530 --> 00:35:54,510
We can attach to
containment. So there

819
00:35:54,510 --> 00:35:56,370
is a – and Docker
does have a term for

820
00:35:56,370 --> 00:35:58,750
it or a command
called docker attach.

821
00:36:00,370 --> 00:36:02,450
But that's not
probably going to do

822
00:36:02,450 --> 00:36:04,730
what you think it
does with a container.

823
00:36:05,030 --> 00:36:07,130
When you do a docker
attach, what the

824
00:36:07,130 --> 00:36:08,850
default behavior
essentially for that

825
00:36:08,850 --> 00:36:12,170
is to basically say,
okay, you've got

826
00:36:12,170 --> 00:36:14,000
this process running,
and I want to

827
00:36:14,000 --> 00:36:15,550
attach to the process.
It really doesn't

828
00:36:15,550 --> 00:36:16,850
mean you can get
into the process.

829
00:36:17,190 --> 00:36:19,290
Typically, what it
just means from the

830
00:36:19,290 --> 00:36:20,930
container's perspective
is you can get

831
00:36:22,000 --> 00:36:25,160
output from the
process. So the default

832
00:36:25,160 --> 00:36:26,780
behavior, if you
do a Docker attach,

833
00:36:27,330 --> 00:36:32,810
is to basically
essentially plug

834
00:36:32,810 --> 00:36:34,710
in the standard out
from the process

835
00:36:34,710 --> 00:36:37,910
that you're running
to the terminal

836
00:36:37,910 --> 00:36:39,950
session that you
are attaching.

837
00:36:39,950 --> 00:36:42,380
And it just basically
gives you the output

838
00:36:42,380 --> 00:36:44,830
of your program. That's
probably not what you

839
00:36:44,830 --> 00:36:46,830
want. Typically, when
we think about attaching

840
00:36:46,830 --> 00:36:48,870
to a container,
people are thinking,

841
00:36:48,870 --> 00:36:50,710
oh, I got this container
running. I've got

842
00:36:50,710 --> 00:36:53,870
Anban running, but I
want to see what's going

843
00:36:53,870 --> 00:36:56,650
on inside the container,
right? Now, here's

844
00:36:56,650 --> 00:36:59,010
the first issue with
that kind of thinking.

845
00:36:59,190 --> 00:37:00,690
There's nothing
going on inside

846
00:37:00,690 --> 00:37:02,350
the container except
the one process

847
00:37:02,350 --> 00:37:04,810
that's running,
Anban, okay?

848
00:37:05,630 --> 00:37:07,990
What you really
are asking, though,

849
00:37:07,990 --> 00:37:09,310
typically when
people are wanting to

850
00:37:09,310 --> 00:37:10,550
do this, is they
want to see what the

851
00:37:10,550 --> 00:37:12,910
file system is that
Anban is seeing.

852
00:37:13,270 --> 00:37:15,930
And the way that
Docker provides us a

853
00:37:15,930 --> 00:37:18,810
mechanism to do that or
similar kinds of things,

854
00:37:18,810 --> 00:37:21,490
we can affect the
file system that our

855
00:37:21,490 --> 00:37:25,030
container is working
on by doing a Docker

856
00:37:25,030 --> 00:37:28,190
exec and specifying
the running container

857
00:37:28,410 --> 00:37:31,610
and then specifying
a command in the

858
00:37:31,610 --> 00:37:34,550
container's file system
that we want to run.

859
00:37:34,730 --> 00:37:37,750
So if we built our
container with a shell

860
00:37:37,750 --> 00:37:40,630
program inside the
container's file system,

861
00:37:41,150 --> 00:37:43,930
we can then, once we
have the container

862
00:37:43,930 --> 00:37:45,810
up and running,
an instance of it

863
00:37:45,810 --> 00:37:49,030
running on that image,
we can run another

864
00:37:49,030 --> 00:37:52,910
process and give it
access to see the

865
00:37:52,910 --> 00:37:56,170
same image as the
container, the container

866
00:37:56,170 --> 00:37:57,670
that's running.
Everyone get this?

867
00:37:58,150 --> 00:38:01,810
The difference is it's
not running, the second

868
00:38:01,810 --> 00:38:03,730
process is not running
in the container.

869
00:38:04,410 --> 00:38:06,310
All it's doing is
running its own

870
00:38:06,310 --> 00:38:08,950
process, a shell
program, that has

871
00:38:08,950 --> 00:38:11,170
the same visibility
of the file

872
00:38:11,170 --> 00:38:12,710
system that the
container is using.

873
00:38:12,930 --> 00:38:15,970
It's been change
-rooted just like the

874
00:38:15,970 --> 00:38:17,490
original program
in our container.

875
00:38:17,750 --> 00:38:20,730
So now the shell
gives you a view of

876
00:38:20,730 --> 00:38:23,090
what's in there,
but don't mistake it

877
00:38:23,090 --> 00:38:25,690
for a process running
in the container.

878
00:38:25,990 --> 00:38:27,750
If you had to
still go back

879
00:38:27,750 --> 00:38:28,870
to the original container

880
00:38:28,990 --> 00:38:31,390
and do a PS command,
you wouldn't see the

881
00:38:31,390 --> 00:38:36,090
second process running
inside your container.

882
00:38:36,090 --> 00:38:37,310
You'd still only
see the one process.

883
00:38:37,800 --> 00:38:38,970
The other one's
a completely

884
00:38:38,970 --> 00:38:40,890
separate process
in your host OS.

885
00:38:41,710 --> 00:38:43,390
It's just been
change-rooted to

886
00:38:43,390 --> 00:38:45,330
use the same file
system image that

887
00:38:45,330 --> 00:38:46,890
your container
is already using.

888
00:38:46,890 --> 00:38:47,910
Does this make
sense, everyone?

889
00:38:48,750 --> 00:38:50,090
I'll demonstrate all this

890
00:38:50,090 --> 00:38:51,190
stuff in just a second.

891
00:38:53,510 --> 00:38:56,950
and then containers
work together now we

892
00:38:56,950 --> 00:39:01,330
use um docker file
to build a container

893
00:39:01,330 --> 00:39:04,770
image and i said
containers um should do

894
00:39:04,770 --> 00:39:06,430
one thing really
well and if you have

895
00:39:06,430 --> 00:39:08,210
multiple things that
need to be done well

896
00:39:08,210 --> 00:39:12,370
um then you run
multiple containers a

897
00:39:12,370 --> 00:39:14,750
great example is
typically brought out is

898
00:39:14,750 --> 00:39:16,390
let's say that you're
designing a web

899
00:39:16,390 --> 00:39:18,950
application oftentimes
we might use react

900
00:39:18,950 --> 00:39:21,470
is our front-end,
which runs on Node.js.

901
00:39:21,470 --> 00:39:23,650
We often would
then use maybe some

902
00:39:23,650 --> 00:39:25,070
kind of back-end
API. You could

903
00:39:25,070 --> 00:39:29,250
use Python,
something like that,

904
00:39:30,050 --> 00:39:32,960
say implement that in
a flask to framework

905
00:39:32,960 --> 00:39:37,570
to be able to get a
simple web service API.

906
00:39:37,870 --> 00:39:39,330
And then you
have a database,

907
00:39:39,670 --> 00:39:40,370
right?

908
00:39:40,870 --> 00:39:42,090
Usually you're going
to have a database

909
00:39:42,090 --> 00:39:44,550
to keep your data
for your application.

910
00:39:44,550 --> 00:39:46,450
Those are three
different components.

911
00:39:46,710 --> 00:39:48,910
In a more traditional
way of doing

912
00:39:48,910 --> 00:39:50,410
things, you might
run each of those

913
00:39:50,410 --> 00:39:52,290
three components,
or even a more

914
00:39:52,290 --> 00:39:53,290
primitive way
would have been to

915
00:39:53,290 --> 00:39:54,810
implement each of
those three yourself,

916
00:39:54,890 --> 00:39:56,170
or just run those three

917
00:39:56,170 --> 00:39:57,510
components on one system.

918
00:39:58,570 --> 00:40:00,630
We still want to have
all those components

919
00:40:00,630 --> 00:40:02,270
as part of our
application, but we don't

920
00:40:02,270 --> 00:40:06,390
want to have to have a
mechanism where we're

921
00:40:06,390 --> 00:40:07,950
trying to build all
three of those ourselves

922
00:40:07,950 --> 00:40:11,030
so that we can get
everything going. So

923
00:40:11,030 --> 00:40:12,590
the typical way that
you would do this under

924
00:40:12,590 --> 00:40:15,570
Docker is you would
make a Docker container

925
00:40:15,570 --> 00:40:18,210
for your front-end,
and it does Node.js.

926
00:40:18,230 --> 00:40:21,540
You do a Docker
container for your API,

927
00:40:22,210 --> 00:40:23,170
web API,

928
00:40:23,670 --> 00:40:25,230
as I'm suggesting written

929
00:40:25,230 --> 00:40:26,350
in Flask or something,

930
00:40:26,350 --> 00:40:28,470
that runs under
another container.

931
00:40:28,470 --> 00:40:30,150
And then your
database would be

932
00:40:30,150 --> 00:40:31,590
running in a
third container.

933
00:40:31,670 --> 00:40:33,910
Each container would
be specialized to

934
00:40:33,910 --> 00:40:36,110
do exactly what it
needs to do. And

935
00:40:36,110 --> 00:40:37,290
then what you need
to do is just get

936
00:40:37,290 --> 00:40:38,970
those containers to
talk to each other.

937
00:40:39,160 --> 00:40:42,010
Well, and we
can do that by

938
00:40:42,010 --> 00:40:43,970
mapping ports and
such between these

939
00:40:43,970 --> 00:40:45,470
and be able to
hook them up.

940
00:40:45,970 --> 00:40:49,050
Docker gives us a way
of doing this so that

941
00:40:49,050 --> 00:40:51,310
if we've broken our
application into

942
00:40:51,310 --> 00:40:54,330
multiple containers,
we can create a Docker

943
00:40:54,330 --> 00:40:59,250
Compose file, and it'll
allow us to the Compose

944
00:40:59,250 --> 00:41:01,870
file, just as the
Docker file tells us

945
00:41:01,870 --> 00:41:04,020
how to build an individual
image, the Docker

946
00:41:04,020 --> 00:41:06,510
Compose tells us how
to start up all these

947
00:41:06,510 --> 00:41:08,670
containers that have
this relationship,

948
00:41:08,830 --> 00:41:11,270
right? My theoretical
app has three

949
00:41:11,270 --> 00:41:13,310
containers. It'll
start up all three of

950
00:41:13,310 --> 00:41:15,290
the containers and
make sure they're all

951
00:41:15,290 --> 00:41:17,030
hooked up together
so that they can

952
00:41:17,030 --> 00:41:19,290
communicate correctly
with each other.

953
00:41:19,650 --> 00:41:22,130
That's what the Docker
Compose does for us.

954
00:41:22,130 --> 00:41:24,470
Now, there are other
systems for doing

955
00:41:24,470 --> 00:41:25,890
this. Kubernetes
is probably the

956
00:41:25,890 --> 00:41:27,770
biggest one that
you might have heard

957
00:41:27,770 --> 00:41:30,590
in reference to
Docker or containers.

958
00:41:31,250 --> 00:41:34,820
Kubernetes is Docker
Compose on steroids.

959
00:41:34,820 --> 00:41:39,760
It does an incredible
amount of management

960
00:41:40,390 --> 00:41:44,030
of containers, and
you have incredible

961
00:41:45,530 --> 00:41:48,650
fidelity and preciseness
in how you want your

962
00:41:48,650 --> 00:41:51,190
containers to work,
and it can do all kinds

963
00:41:51,190 --> 00:41:53,530
of really cool automated
things. So, for

964
00:41:53,530 --> 00:41:57,330
instance, if a container
crashes or misbehaves

965
00:41:57,330 --> 00:42:00,130
for some reason or
no longer seems to be

966
00:42:00,130 --> 00:42:02,230
responding or something's
happened to it,

967
00:42:02,650 --> 00:42:04,730
Kubernetes can
automatically kill it and

968
00:42:04,730 --> 00:42:06,550
restart another one
for you automatically.

969
00:42:06,570 --> 00:42:09,130
If your application's
starting to exhibit

970
00:42:09,130 --> 00:42:10,750
load, Kubernetes
can scale your

971
00:42:10,750 --> 00:42:13,090
application up and
add more containers or

972
00:42:13,090 --> 00:42:15,730
scale them down. It
has a whole bunch of

973
00:42:15,730 --> 00:42:19,510
capabilities for
managing containers.

974
00:42:20,510 --> 00:42:23,650
So it's – but
along with all that

975
00:42:23,650 --> 00:42:25,430
capability for management
comes additional

976
00:42:25,430 --> 00:42:28,150
overhead. So if
you're going to –

977
00:42:28,320 --> 00:42:30,860
Kubernetes is a great
tool to learn and

978
00:42:30,970 --> 00:42:34,210
to work with, but
learn basic Docker

979
00:42:34,210 --> 00:42:37,230
first and then move
up to Kubernetes.

980
00:42:37,450 --> 00:42:39,510
Otherwise, you may
end up being a little

981
00:42:39,510 --> 00:42:41,050
bit more confused
than you need to be.

982
00:42:41,850 --> 00:42:44,230
So let's see.
That's basically the

983
00:42:44,230 --> 00:42:45,410
discussion I wanted
to make about

984
00:42:45,410 --> 00:42:47,310
this stuff. So
let's do a couple

985
00:42:47,310 --> 00:42:50,150
simple demonstrations
of that.

986
00:42:50,610 --> 00:42:55,170
um so i've got docker
for mac installed on

987
00:42:55,170 --> 00:42:56,830
here so we can you
can do a lot of stuff

988
00:42:56,830 --> 00:43:00,210
with this it gives you
this dashboard capability

989
00:43:00,750 --> 00:43:03,390
when you launch it
um docker for windows

990
00:43:03,390 --> 00:43:05,390
does a similar kind
of thing over here on

991
00:43:05,390 --> 00:43:08,010
the left hand side we
have a bunch of places

992
00:43:08,010 --> 00:43:10,450
so we have containers
when it says containers

993
00:43:10,450 --> 00:43:13,030
here it's referencing
containers that

994
00:43:13,030 --> 00:43:16,810
are either currently
running or have run okay

995
00:43:17,440 --> 00:43:20,630
it basically means
that we have set up

996
00:43:20,630 --> 00:43:22,910
their their image
environment so i've got three

997
00:43:22,910 --> 00:43:25,330
of these that have
run now typically what

998
00:43:25,330 --> 00:43:27,990
happens with uh dockers
when you start up

999
00:43:27,990 --> 00:43:31,610
a docker container if
you uh first of all

1000
00:43:31,610 --> 00:43:33,870
it's got a name these
are randomly generated

1001
00:43:33,870 --> 00:43:35,970
names i could specify
a name if you don't

1002
00:43:35,970 --> 00:43:37,490
specify a name for
your container when you

1003
00:43:37,490 --> 00:43:40,170
launch it when you do
a docker run docker

1004
00:43:40,170 --> 00:43:42,270
will automatically
generate a name for you

1005
00:43:42,270 --> 00:43:45,350
why because generally
we like to use this

1006
00:43:45,350 --> 00:43:48,370
rather than the ids
which look like this the

1007
00:43:48,370 --> 00:43:53,010
ids are just hash um
hash ids um and they're

1008
00:43:53,010 --> 00:43:55,210
ugly and humans usually
don't like to pay

1009
00:43:55,210 --> 00:43:58,870
attention to those
but pensive gates even

1010
00:43:58,870 --> 00:44:00,970
though it does it's
nonsense still is more

1011
00:44:00,970 --> 00:44:06,490
meaningful than d979
blah blah blah and like

1012
00:44:06,490 --> 00:44:08,850
i said i can name them
whatever I want to.

1013
00:44:09,830 --> 00:44:11,910
Now, this tells me,
it tells me what

1014
00:44:11,910 --> 00:44:14,230
image file it would
use. So these were

1015
00:44:14,230 --> 00:44:17,130
using an Ubuntu
base image that I

1016
00:44:17,130 --> 00:44:19,210
launched. This one's
using my Cyphered

1017
00:44:19,210 --> 00:44:21,810
Angbon. I'd have to
expand that row out.

1018
00:44:22,110 --> 00:44:24,850
Since these are
no longer running,

1019
00:44:25,910 --> 00:44:28,470
there's no CPU
utilization on these. And

1020
00:44:28,470 --> 00:44:30,290
I ran these two four
months ago, the last

1021
00:44:30,290 --> 00:44:32,550
class. This one's
one I did just before

1022
00:44:32,550 --> 00:44:35,690
class day. And I
could delete these out

1023
00:44:35,830 --> 00:44:38,470
or I could restart
these if I wanted to.

1024
00:44:39,630 --> 00:44:41,490
We come down
here to images.

1025
00:44:41,690 --> 00:44:43,790
Well, this is a
list of the Docker

1026
00:44:43,790 --> 00:44:46,350
images that I have
downloaded or built

1027
00:44:46,350 --> 00:44:49,190
and are available
to my Docker daemon.

1028
00:44:50,410 --> 00:44:52,110
Notice I've got
a lot more images

1029
00:44:52,110 --> 00:44:54,310
here than what I
had in containers

1030
00:44:54,470 --> 00:44:56,670
primarily because most
of the containers,

1031
00:44:56,670 --> 00:44:59,190
when I run them, I
actually will delete them

1032
00:44:59,190 --> 00:45:00,610
as soon as I'm done.
I'll throw them away

1033
00:45:00,610 --> 00:45:02,530
right away. I don't want
to keep them around.

1034
00:45:02,530 --> 00:45:08,390
um volumes i don't
have any volumes in

1035
00:45:08,390 --> 00:45:12,600
here but this is a way
that i can define what

1036
00:45:12,600 --> 00:45:15,850
we call docker volumes
docker volumes are

1037
00:45:15,850 --> 00:45:20,450
areas of your host file
system that are going

1038
00:45:20,450 --> 00:45:24,190
to be made available
to your containers

1039
00:45:24,190 --> 00:45:27,290
um when you launch
them so you can attach

1040
00:45:27,290 --> 00:45:29,690
them and so So you can
think of this as when

1041
00:45:29,690 --> 00:45:32,630
I launch a container,
I can have a standard

1042
00:45:32,630 --> 00:45:35,930
storage location
that I want any of my

1043
00:45:35,930 --> 00:45:39,250
containers to be able
to mount in my host OS.

1044
00:45:39,250 --> 00:45:42,030
And so I can define
them as volumes, and

1045
00:45:42,030 --> 00:45:44,810
then when a container
is brought up, I

1046
00:45:44,810 --> 00:45:47,410
can attach that volume
to that container,

1047
00:45:47,410 --> 00:45:50,010
and now it sees the
information inside

1048
00:45:50,010 --> 00:45:53,110
there. But it's a
resource that stays with

1049
00:45:53,110 --> 00:45:55,350
my OS. It doesn't go
with the container.

1050
00:45:55,350 --> 00:45:57,470
It stays with the OS.
That's just when I

1051
00:45:57,470 --> 00:45:59,550
bring up the container,
I say, use this

1052
00:45:59,550 --> 00:46:03,730
Docker volume on my
host OS for some of

1053
00:46:03,730 --> 00:46:06,590
your work or storing
things. And then we

1054
00:46:06,590 --> 00:46:08,470
have build processes.
So these are some of

1055
00:46:08,470 --> 00:46:11,150
the builds that I've
done and so forth.

1056
00:46:11,450 --> 00:46:12,730
Docker Hub.

1057
00:46:14,330 --> 00:46:17,970
This is, when you
click on this, what

1058
00:46:17,970 --> 00:46:19,950
you're actually going
to is a website.

1059
00:46:19,950 --> 00:46:21,850
Now, this is
called what Docker

1060
00:46:21,850 --> 00:46:23,210
has the notion of
what's called a

1061
00:46:23,210 --> 00:46:26,710
registry. When you
build a Docker image,

1062
00:46:27,420 --> 00:46:28,270
that's going to be on

1063
00:46:28,270 --> 00:46:30,650
your local machine, okay?

1064
00:46:31,370 --> 00:46:33,150
And that's not going
to be very useful

1065
00:46:33,150 --> 00:46:34,690
because you want other
people to get your

1066
00:46:34,690 --> 00:46:38,330
Docker image. So you
could email them or

1067
00:46:38,330 --> 00:46:40,250
share it through a file
system or something

1068
00:46:40,250 --> 00:46:43,250
like that. But
typically what we do is

1069
00:46:43,250 --> 00:46:47,150
we push our Docker
images to a registry,

1070
00:46:47,510 --> 00:46:48,530
okay?

1071
00:46:48,530 --> 00:46:51,250
And your registry,
there can be private

1072
00:46:51,250 --> 00:46:53,290
registries and
public registries.

1073
00:46:53,530 --> 00:46:55,490
By default, if you
don't specify the

1074
00:46:55,490 --> 00:46:56,960
registry, you're going
to use the public

1075
00:46:56,960 --> 00:46:59,200
registry. And what do
I mean by the public

1076
00:46:59,200 --> 00:47:00,150
registry? Well, you
can have multiple

1077
00:47:00,150 --> 00:47:02,260
public registries,
but as far as Docker

1078
00:47:02,260 --> 00:47:04,470
contains, Docker Hub
is the name of their

1079
00:47:04,470 --> 00:47:06,690
public registry. And
if you don't specify

1080
00:47:06,690 --> 00:47:09,110
a registry when
you're using Docker,

1081
00:47:09,110 --> 00:47:11,050
it's going to assume
that you mean Docker

1082
00:47:11,050 --> 00:47:12,930
Hub, and that's where
it's going to go.

1083
00:47:13,290 --> 00:47:16,030
You, as an organization,
you can run your

1084
00:47:16,030 --> 00:47:18,850
own private registry.
You have Docker

1085
00:47:18,850 --> 00:47:22,050
container images that are
for your organization,

1086
00:47:22,050 --> 00:47:24,510
but you don't want
them to be out for

1087
00:47:24,510 --> 00:47:26,830
anybody to be able to
download or access.

1088
00:47:27,210 --> 00:47:29,290
Set up your own
registry in your own

1089
00:47:29,290 --> 00:47:33,390
organization and push
your Docker images to your

1090
00:47:33,390 --> 00:47:36,590
personal organization's
private registry.

1091
00:47:37,030 --> 00:47:39,930
But the public hub
or a Docker hub is a

1092
00:47:39,930 --> 00:47:42,790
great place to start
with. In the Docker

1093
00:47:42,790 --> 00:47:46,690
Hub, there are official
image releases from

1094
00:47:46,690 --> 00:47:50,470
Docker that you can
get. There are official

1095
00:47:50,470 --> 00:47:56,170
images for various
developers that

1096
00:47:56,170 --> 00:47:58,990
have released their
stuff. So if you want an

1097
00:47:59,840 --> 00:48:03,050
Oracle database or
other kinds of services,

1098
00:48:03,050 --> 00:48:07,210
you can go find a
Docker image supported

1099
00:48:07,210 --> 00:48:10,290
officially by that
developer, and they

1100
00:48:10,290 --> 00:48:12,290
place it and maintain
it in Docker Hub.

1101
00:48:12,980 --> 00:48:15,010
Likewise, if you
want, and this

1102
00:48:15,010 --> 00:48:16,970
is great for open
source tools,

1103
00:48:17,050 --> 00:48:20,390
most open source tools
have Docker images

1104
00:48:20,390 --> 00:48:23,190
that have been
officially sponsored.

1105
00:48:24,230 --> 00:48:26,450
So officially
sponsored open source

1106
00:48:26,450 --> 00:48:28,950
tools are things like
GCC and things of

1107
00:48:28,950 --> 00:48:30,870
this nature, where
they're open source

1108
00:48:30,870 --> 00:48:34,470
tools and they work
with whoever's sort

1109
00:48:34,470 --> 00:48:36,470
of the central
management team for

1110
00:48:36,470 --> 00:48:39,370
the open-source tool
and release official

1111
00:48:40,950 --> 00:48:42,750
open-source versions
of the tools.

1112
00:48:42,990 --> 00:48:43,920
And then finally,

1113
00:48:44,740 --> 00:48:49,610
anybody can register
on the Docker Hub.

1114
00:48:49,680 --> 00:48:51,230
In fact, I'm going
to have you guys

1115
00:48:51,230 --> 00:48:53,550
register your own
account on Docker Hub

1116
00:48:53,550 --> 00:48:56,610
as part of the
container assignment

1117
00:48:56,610 --> 00:48:58,330
I'll give you next
week, or actually

1118
00:48:58,330 --> 00:49:00,110
I'll give it to you
after the midterm.

1119
00:49:02,790 --> 00:49:05,370
And anybody can push
their own images up.

1120
00:49:05,440 --> 00:49:08,030
And you can, once
you push them up to

1121
00:49:08,030 --> 00:49:10,570
the public Docker
hub, anybody can grab

1122
00:49:10,570 --> 00:49:13,170
your image and pull
them down, right? So,

1123
00:49:13,170 --> 00:49:15,150
this is an easy way
to share. If you go

1124
00:49:15,150 --> 00:49:17,510
over here, you can
go search on it. So,

1125
00:49:17,510 --> 00:49:18,970
obviously, they're
highlighting some things

1126
00:49:18,970 --> 00:49:22,150
like LLMs and AI
kinds of things going

1127
00:49:22,150 --> 00:49:24,900
on because that's
got a lot of panache

1128
00:49:26,330 --> 00:49:27,930
right now. Everyone's
interested in that.

1129
00:49:28,810 --> 00:49:31,030
So, this is the
containers. Now, I

1130
00:49:31,030 --> 00:49:34,050
don't typically use
the dashboard itself

1131
00:49:34,050 --> 00:49:35,710
directly for doing
a lot of things.

1132
00:49:35,770 --> 00:49:38,190
You can, but I'm
a little bit old

1133
00:49:38,190 --> 00:49:39,880
school, and I
tend to use the

1134
00:49:39,880 --> 00:49:41,790
command line tools
for this stuff.

1135
00:49:42,010 --> 00:49:53,870
So in my Mac, I've got
a directory for P465.

1136
00:49:53,870 --> 00:49:55,130
It's a Docker
directory. I'm going to

1137
00:49:55,130 --> 00:49:57,330
demonstrate a couple
things in here. One thing

1138
00:49:57,330 --> 00:49:59,710
I want to point out
to you, when you go to

1139
00:49:59,710 --> 00:50:03,090
use Docker, you need
to install Docker for

1140
00:50:03,090 --> 00:50:05,610
Windows or Docker for
Mac on your laptop.

1141
00:50:05,670 --> 00:50:10,010
You cannot use
Silo to run Docker.

1142
00:50:10,930 --> 00:50:16,860
We do have a special
machine called Silo

1143
00:50:16,860 --> 00:50:19,770
Docker or Burrow Docker,
two names for it,

1144
00:50:20,490 --> 00:50:22,770
which you could. You
have to have an account

1145
00:50:22,770 --> 00:50:26,030
on there, and I have
to sponsor it. And

1146
00:50:26,030 --> 00:50:28,110
I will sponsor it
for somebody. If for

1147
00:50:28,110 --> 00:50:31,490
some reason your machine
can't run the Docker

1148
00:50:31,490 --> 00:50:33,450
on your laptop, let
me know. And I can

1149
00:50:33,450 --> 00:50:36,480
get you a sponsored
account on SiloDocker.

1150
00:50:38,050 --> 00:50:40,430
I want to explain a
little bit about this

1151
00:50:40,430 --> 00:50:43,350
as well. Remember I
said that Docker has

1152
00:50:43,350 --> 00:50:46,370
a daemon process, and
that's what starts

1153
00:50:46,370 --> 00:50:48,910
your container process,
right? When you

1154
00:50:48,910 --> 00:50:51,350
want to run a container,
I said it's the

1155
00:50:51,350 --> 00:50:53,190
Docker daemon that
starts up your process.

1156
00:50:53,190 --> 00:50:56,530
Well, the Docker
daemon runs as root,

1157
00:50:56,730 --> 00:50:57,750
okay?

1158
00:50:57,750 --> 00:51:00,370
And when you run a
Docker container,

1159
00:51:00,370 --> 00:51:04,890
it runs as root by
default in your host OS

1160
00:51:04,890 --> 00:51:06,910
because the Docker
daemon is running it.

1161
00:51:07,030 --> 00:51:10,090
You can tell the Docker
daemon to run under

1162
00:51:10,090 --> 00:51:15,330
a different UID than
the root UID, okay?

1163
00:51:15,330 --> 00:51:17,930
But by default, it's
running under root.

1164
00:51:17,930 --> 00:51:20,490
That means that you
need to, in order for

1165
00:51:20,490 --> 00:51:23,390
you to run, to be able
to tell the demon to

1166
00:51:23,390 --> 00:51:25,910
do something as root,
you need to have that

1167
00:51:25,910 --> 00:51:28,010
root authority
yourself. And we don't

1168
00:51:28,010 --> 00:51:30,870
hand out root authority
to silo. Now, there

1169
00:51:30,870 --> 00:51:33,410
is a mechanism for
doing what we call sudo

1170
00:51:33,670 --> 00:51:37,870
that will allow a non
-privileged user to

1171
00:51:37,870 --> 00:51:41,270
have access to privilege
commands selectively.

1172
00:51:41,270 --> 00:51:44,670
And so typically you
would use sudo as a

1173
00:51:44,670 --> 00:51:47,590
way to set this up.
But because there's

1174
00:51:47,590 --> 00:51:50,520
some other risks with
running docker containers

1175
00:51:50,520 --> 00:51:52,910
um especially if you
can let if you're

1176
00:51:52,910 --> 00:51:54,830
going to let somebody
run any kind of container

1177
00:51:54,830 --> 00:51:57,250
that they want to
like we would for

1178
00:51:57,250 --> 00:51:59,810
students in silo there
are some additional

1179
00:51:59,810 --> 00:52:02,210
risks um associated
with that so rather than

1180
00:52:02,210 --> 00:52:05,770
running those on silo
where we would those

1181
00:52:05,770 --> 00:52:07,790
risks would be incurred
by every but all

1182
00:52:07,790 --> 00:52:09,870
students who are using
it we've moved all

1183
00:52:09,870 --> 00:52:12,690
the docker stuff of
silo docker and those

1184
00:52:12,690 --> 00:52:14,210
risks are only going
to be pertained for the

1185
00:52:14,210 --> 00:52:17,510
students who are explicitly
using that central

1186
00:52:17,510 --> 00:52:19,310
service for running
Docker containers.

1187
00:52:20,550 --> 00:52:22,430
And also, I want to
come back to this

1188
00:52:22,430 --> 00:52:25,730
whole notion of running
as root or running

1189
00:52:25,730 --> 00:52:27,230
under a different
UID. This gets a

1190
00:52:27,230 --> 00:52:29,030
little bit confusing
with containers, but

1191
00:52:29,030 --> 00:52:30,870
I'll explain that
probably on Monday.

1192
00:52:33,290 --> 00:52:36,010
So for us, we're
going to run Docker

1193
00:52:36,010 --> 00:52:38,190
on our laptops
because we all should

1194
00:52:38,190 --> 00:52:40,610
have system or essentially
root authority.

1195
00:52:40,610 --> 00:52:41,910
There should be
a problem with us

1196
00:52:41,910 --> 00:52:45,230
running Docker
containers. So, let's

1197
00:52:45,230 --> 00:52:48,550
run a Docker container
that I've got on

1198
00:52:48,550 --> 00:52:50,970
here real quick.
Let's do Docker run.

1199
00:52:52,270 --> 00:52:53,810
Docker containers
actually

1200
00:52:53,810 --> 00:52:56,830
have a format to them.

1201
00:52:57,710 --> 00:53:02,550
Now, the full format
is host name, which

1202
00:53:02,550 --> 00:53:05,470
in this case would be
local host, and then

1203
00:53:05,470 --> 00:53:07,590
actually, I'm not going
to do it that way.

1204
00:53:07,770 --> 00:53:09,770
For instance, we
could do Docker Hub

1205
00:53:09,770 --> 00:53:11,850
as the host name,
and then we could

1206
00:53:11,850 --> 00:53:13,770
have a port
name, port number

1207
00:53:13,770 --> 00:53:14,810
associated with that.
I can't remember

1208
00:53:14,810 --> 00:53:16,110
what the port number
is for Docker.

1209
00:53:16,110 --> 00:53:18,870
And then we would have
something like this.

1210
00:53:19,970 --> 00:53:24,370
So a full specification
for a container

1211
00:53:24,370 --> 00:53:28,890
would be include
this host

1212
00:53:28,890 --> 00:53:30,470
information. This host
information is the

1213
00:53:30,470 --> 00:53:32,410
registry from which
we expect to be

1214
00:53:32,410 --> 00:53:34,430
able to grab this
container image.

1215
00:53:35,570 --> 00:53:38,530
And basically, if we
don't specify one,

1216
00:53:38,910 --> 00:53:40,970
our Docker container
is going to – or Docker

1217
00:53:40,970 --> 00:53:43,010
daemon is going to
look at its own list of

1218
00:53:43,720 --> 00:53:45,650
container images it's
got and try to pick

1219
00:53:45,650 --> 00:53:48,420
one of those. Or it's
going to assume Docker

1220
00:53:48,420 --> 00:53:52,030
Hub as the host, the
public registry, and

1221
00:53:52,030 --> 00:53:53,810
try to go find the name
of the container that

1222
00:53:53,810 --> 00:53:56,850
you gave it out in the
public registry and

1223
00:53:56,850 --> 00:53:59,090
grab it and bring it
down. The second part

1224
00:53:59,090 --> 00:54:01,590
is what we call – is
called the namespace.

1225
00:54:01,870 --> 00:54:04,150
Typically, if you're in
the Docker Hub, that's

1226
00:54:04,150 --> 00:54:06,630
going to be your
identity in Docker Hub.

1227
00:54:07,890 --> 00:54:11,290
You'll typically use
it as a way to identify

1228
00:54:11,470 --> 00:54:14,070
your company or
organization if you're

1229
00:54:14,070 --> 00:54:16,450
doing local ones.
And then you have the

1230
00:54:16,450 --> 00:54:19,530
name of the image
that you want itself.

1231
00:54:19,530 --> 00:54:22,030
And so this is
ciphered namespace.

1232
00:54:22,030 --> 00:54:25,230
I've got an on-bond
image. And then

1233
00:54:25,230 --> 00:54:31,610
finally, on the
end, we can have one

1234
00:54:31,610 --> 00:54:33,790
other field, which
is known as the tag.

1235
00:54:33,830 --> 00:54:36,470
Now, a tag is just
a human description

1236
00:54:36,470 --> 00:54:39,790
of this particular
version of ciphered

1237
00:54:39,790 --> 00:54:41,550
Ongbans. So I could
have several ciphered

1238
00:54:41,550 --> 00:54:44,070
Ongbans, each one
with a different tag.

1239
00:54:44,210 --> 00:54:46,570
If we don't
specify a tag, it's

1240
00:54:46,570 --> 00:54:48,530
assumed to be the
tag of latest.

1241
00:54:48,750 --> 00:54:50,910
Latest means
finally the most

1242
00:54:50,910 --> 00:54:55,570
current ciphered
on bond there is,

1243
00:54:55,890 --> 00:54:57,370
okay? But I could
have others.

1244
00:54:57,410 --> 00:54:59,930
So, for instance, I
could have, you know,

1245
00:54:59,930 --> 00:55:03,950
I could have one as V1
versus V2 versus V3.

1246
00:55:03,950 --> 00:55:06,150
I could have one,
and we'll talk about

1247
00:55:06,150 --> 00:55:09,410
building for images or
building for certain

1248
00:55:09,410 --> 00:55:11,710
architectures. You
know, you might say

1249
00:55:11,710 --> 00:55:17,970
something like x86 versus
an ARM build, right?

1250
00:55:17,970 --> 00:55:19,850
And so you can just
put a tag on the end

1251
00:55:19,850 --> 00:55:22,150
of that as the way we
refer to this. So I'm

1252
00:55:22,150 --> 00:55:24,050
just going to go ahead
and start this as

1253
00:55:24,050 --> 00:55:28,770
run Seifert Ongbond.
Now, what's this do?

1254
00:55:28,770 --> 00:55:32,230
Well, what it should
do is run Ongbond.

1255
00:55:32,390 --> 00:55:34,910
All that container
has is when I run the

1256
00:55:34,910 --> 00:55:37,810
container, it has a
directive, builds up a file

1257
00:55:37,810 --> 00:55:39,870
system that's appropriate
for Ongbond, and

1258
00:55:39,870 --> 00:55:43,070
then launches that
process, and that's what

1259
00:55:43,070 --> 00:55:45,170
I get. And I can start
playing Ongbond on

1260
00:55:45,170 --> 00:55:47,390
here. Now, I'm running
inside my container.

1261
00:55:48,870 --> 00:55:50,450
Why is this? There we go.

1262
00:55:51,140 --> 00:55:52,470
This one's got a
little bit of a problem

1263
00:55:52,470 --> 00:55:55,390
with the way this
terminal session's set up.

1264
00:55:55,590 --> 00:55:58,050
But this is Anbans
running in that

1265
00:55:58,050 --> 00:55:59,570
container now.
But let's say that

1266
00:55:59,570 --> 00:56:00,870
I wanted to take
a look at what

1267
00:56:00,870 --> 00:56:02,510
that container
image looks like.

1268
00:56:02,510 --> 00:56:04,590
Remember, I said we
don't want to attach,

1269
00:56:04,590 --> 00:56:05,890
because attach does
something slightly

1270
00:56:05,890 --> 00:56:07,910
different. But what I did
say was we can go ahead

1271
00:56:07,910 --> 00:56:16,830
and exec another process
inside that image.

1272
00:56:16,830 --> 00:56:19,430
Now, I need to know
which image I have.

1273
00:56:19,430 --> 00:56:23,000
So if I run Docker PS,
this will tell me what

1274
00:56:24,610 --> 00:56:27,150
Docker containers
that I've got running.

1275
00:56:27,590 --> 00:56:29,870
So Docker PS is a
command to tell me

1276
00:56:29,870 --> 00:56:31,670
what images or Docker
containers I've

1277
00:56:31,670 --> 00:56:33,750
got running. Here's
the container ID.

1278
00:56:34,050 --> 00:56:35,950
Here's the image it
came from. there's

1279
00:56:35,950 --> 00:56:37,170
the command it's
actually running I

1280
00:56:37,170 --> 00:56:39,790
started 50 seconds ago
still running there's

1281
00:56:39,790 --> 00:56:41,730
no ports mapped and
then we have the

1282
00:56:41,730 --> 00:56:43,590
name this is the name
that's automatically

1283
00:56:44,560 --> 00:56:48,290
generated by the
docker demon angry

1284
00:56:48,310 --> 00:56:51,050
raymond so what
I can do now is I

1285
00:56:51,050 --> 00:56:53,190
could say well I want
to do a docker exec

1286
00:56:54,110 --> 00:56:57,030
minus it this basically
gives me interactive

1287
00:56:57,030 --> 00:57:01,410
access to the process
I'm going to run

1288
00:57:01,410 --> 00:57:02,830
and then Then I need
to tell it which

1289
00:57:02,830 --> 00:57:05,390
container. Now, I mean
by not container image,

1290
00:57:05,390 --> 00:57:08,330
but which container
is actually running

1291
00:57:08,330 --> 00:57:12,290
that I want to run my
other process in. I

1292
00:57:12,290 --> 00:57:14,110
could specify this in
two different ways.

1293
00:57:14,110 --> 00:57:15,850
I could either give
it the container ID,

1294
00:57:16,010 --> 00:57:18,130
or I can give it the
container name. I'm

1295
00:57:18,130 --> 00:57:19,090
going to go with
the container name

1296
00:57:19,090 --> 00:57:20,910
because it's a lot
easier for me to type.

1297
00:57:22,650 --> 00:57:24,990
So now I've specified
the container. What

1298
00:57:24,990 --> 00:57:27,110
I want to do is exec.
So what do I want to

1299
00:57:27,110 --> 00:57:29,510
exec? Well, I know this
container image has

1300
00:57:30,590 --> 00:57:34,330
bash in the bin
directory. So I'm going

1301
00:57:34,330 --> 00:57:36,290
to say bin bash is
what I want to run.

1302
00:57:37,170 --> 00:57:38,890
What did I do wrong here?

1303
00:57:42,110 --> 00:57:44,110
Did I spell
something wrong here?

1304
00:57:44,850 --> 00:57:46,170
Oh, yeah, I did.

1305
00:57:50,210 --> 00:57:51,390
There we go.

1306
00:57:51,390 --> 00:57:52,520
Now I get a prompt.

1307
00:57:52,890 --> 00:57:54,210
It probably looks
a little bit weird,

1308
00:57:55,370 --> 00:57:58,610
but this number
right here is the ID

1309
00:57:58,610 --> 00:58:01,270
that we saw for the
container. So this

1310
00:58:01,270 --> 00:58:04,050
is telling me, if
I type ls in here,

1311
00:58:04,130 --> 00:58:06,370
I see on bond, but
notice the directory

1312
00:58:06,370 --> 00:58:08,310
it says that I'm
in, slash app,

1313
00:58:08,690 --> 00:58:09,590
right?

1314
00:58:10,590 --> 00:58:13,350
I can do a cd up, get a

1315
00:58:13,350 --> 00:58:15,550
better idea of
what I'm in,

1316
00:58:15,550 --> 00:58:16,730
and I take a
look. This is the

1317
00:58:16,730 --> 00:58:19,230
image that I'm
seeing. I've cd'd to

1318
00:58:19,230 --> 00:58:20,710
the root as far
up as I can, but

1319
00:58:20,710 --> 00:58:23,350
this is not my
macOS file system.

1320
00:58:23,690 --> 00:58:26,050
This is the image that

1321
00:58:26,050 --> 00:58:27,150
was in the container.

1322
00:58:27,230 --> 00:58:30,310
it's been essentially
unrolled and the process

1323
00:58:30,310 --> 00:58:33,930
started so and sees
this as its root this

1324
00:58:33,930 --> 00:58:35,850
is what the on bond
sees running so when

1325
00:58:35,850 --> 00:58:39,430
i when i'm running the
on bond process it's

1326
00:58:39,430 --> 00:58:41,440
running in here now
if i do a ps there's

1327
00:58:41,440 --> 00:58:45,230
nothing here i don't
see on bond running it's

1328
00:58:45,230 --> 00:58:46,890
still running over here
even though it's not

1329
00:58:46,890 --> 00:58:48,990
working quite right
because of the um

1330
00:58:49,630 --> 00:58:53,050
keystroke uh the this
keystroke stuff isn't

1331
00:58:53,050 --> 00:58:54,170
working I'm quite right.
I'm not sure what's

1332
00:58:54,170 --> 00:58:56,350
going on with that.
It's not recognizing it.

1333
00:58:57,210 --> 00:58:59,430
But I don't see
it over here. And

1334
00:58:59,430 --> 00:59:01,690
that's because this
is another process

1335
00:59:01,690 --> 00:59:03,650
executed under my
host OS. It just

1336
00:59:03,650 --> 00:59:05,830
has been change
-rooted to use the same

1337
00:59:05,830 --> 00:59:07,790
file system image
as my container.

1338
00:59:08,870 --> 00:59:11,070
And so the things
I'm doing in here

1339
00:59:11,070 --> 00:59:14,630
look like I'm in
that file system.

1340
00:59:15,050 --> 00:59:20,990
And indeed, Angbon
needs those game

1341
00:59:20,990 --> 00:59:22,890
files. So where are
those located at?

1342
00:59:23,990 --> 00:59:25,770
Well, this, you would
have to know that

1343
00:59:25,770 --> 00:59:28,350
I've set this up so
that my game files

1344
00:59:28,350 --> 00:59:34,470
are in slash Vagrant
and Angban Live.

1345
00:59:34,770 --> 00:59:39,950
And in here, I've
got my game data

1346
00:59:39,950 --> 00:59:41,290
files, for
instance. We get in

1347
00:59:41,290 --> 00:59:42,530
here, and here's
our favorite monster

1348
00:59:42,530 --> 00:59:44,250
.txt file and
things like that.

1349
00:59:44,710 --> 00:59:47,270
Point of it is, I
built this image, so

1350
00:59:47,270 --> 00:59:48,950
that's where those
are located at. And I

1351
00:59:48,950 --> 00:59:50,600
built Angban.
Remember, when we built

1352
00:59:50,600 --> 00:59:51,750
Angban, we got to tell
it where it's going

1353
00:59:51,750 --> 00:59:53,850
to be located. So I
built ArcBond with

1354
00:59:53,850 --> 00:59:55,530
the notion, hey,
this is the path that

1355
00:59:55,530 --> 00:59:57,030
you're going to find
your game data in.

1356
00:59:57,050 --> 00:59:58,790
It's all unique to this

1357
00:59:59,330 --> 01:00:02,590
repository image, right?

1358
01:00:04,490 --> 01:00:07,590
But I'm not in
the container. I'm

1359
01:00:07,590 --> 01:00:09,110
just seeing what
the file system

1360
01:00:09,110 --> 01:00:10,630
looks like for
the container,

1361
01:00:10,910 --> 01:00:12,030
all right?

1362
01:00:12,070 --> 01:00:13,830
If I control D out
of this, and so

1363
01:00:13,830 --> 01:00:15,710
I still got this
thing running here.

1364
01:00:15,710 --> 01:00:17,750
And so I can
do a control C

1365
01:00:17,750 --> 01:00:19,150
out of that
and kill that.

1366
01:00:19,270 --> 01:00:22,230
And now the
container is dead.

1367
01:00:22,350 --> 01:00:24,330
because when Ongban
stopped in the

1368
01:00:24,330 --> 01:00:26,390
container, the
container exits as well.

1369
01:00:27,070 --> 01:00:28,390
Make sense, everyone?

1370
01:00:29,450 --> 01:00:31,390
This is an example
running this.

1371
01:00:32,690 --> 01:00:35,050
So let's take a
look at a Docker

1372
01:00:35,050 --> 01:00:36,850
file. So here's a
Docker file I've

1373
01:00:36,850 --> 01:00:37,850
got in here.
Let's take a look

1374
01:00:37,850 --> 01:00:39,310
at what a Docker
file looks like.

1375
01:00:41,510 --> 01:00:46,450
So here's a Docker
file from a bug222

1376
01:00:46,450 --> 01:00:48,690
.04. This is how I
specify the base

1377
01:00:48,690 --> 01:00:50,110
image that I want
to build from.

1378
01:00:50,370 --> 01:00:53,710
I wanted one that
had a whole bunch of

1379
01:00:53,710 --> 01:00:56,310
typical Linux tools
in. So when I'm trying

1380
01:00:56,310 --> 01:00:58,630
to debug and figure
out why my container

1381
01:00:58,630 --> 01:01:01,070
is not working right,
I can always exec a

1382
01:01:01,070 --> 01:01:03,550
shell on my container
that's running and

1383
01:01:03,550 --> 01:01:05,290
go take a look at what's
going on. And I've

1384
01:01:05,290 --> 01:01:07,290
got some tools in
there. Now, one of the

1385
01:01:07,290 --> 01:01:08,610
tools that I would
like to be able to

1386
01:01:08,610 --> 01:01:11,830
use, like in OnBond,
if you run the strings

1387
01:01:11,830 --> 01:01:13,630
command on a binary,
it'll extract out

1388
01:01:13,630 --> 01:01:17,130
all the ASCII strings
in that binary file.

1389
01:01:17,310 --> 01:01:19,250
And so an easy way
for me to figure out

1390
01:01:19,250 --> 01:01:21,710
how Anban is built
specifically for where

1391
01:01:21,710 --> 01:01:23,550
it looks for its
game data, I can run

1392
01:01:23,550 --> 01:01:25,690
the strings command
against the Anban

1393
01:01:25,690 --> 01:01:28,790
binary and then type
that to a graph and

1394
01:01:28,790 --> 01:01:31,810
say search for game
data. And it'll pop

1395
01:01:31,810 --> 01:01:35,410
me out the string in
the binary file of

1396
01:01:35,410 --> 01:01:37,270
where it expects to
find the game data.

1397
01:01:37,730 --> 01:01:40,590
Except I couldn't do
that on this container

1398
01:01:40,810 --> 01:01:43,490
because strings,
while it's a great

1399
01:01:43,490 --> 01:01:46,250
tool, is not part
of the Ubuntu base.

1400
01:01:46,370 --> 01:01:49,590
and I didn't add
it to my OnBond

1401
01:01:49,590 --> 01:01:50,910
container when I
was building my

1402
01:01:50,910 --> 01:01:53,090
OnBond container
image, right?

1403
01:01:53,750 --> 01:01:55,410
So these are some
of the things.

1404
01:01:55,410 --> 01:01:57,730
So here I'm doing,
I'm building,

1405
01:01:57,730 --> 01:02:01,920
or basing this off of
Ubuntu version 22.04.

1406
01:02:02,230 --> 01:02:05,250
And here's where my
first layer is. My first

1407
01:02:05,250 --> 01:02:06,990
layer is going to have,
well, actually this

1408
01:02:06,990 --> 01:02:09,400
is my very first, this
is my base layer is

1409
01:02:09,470 --> 01:02:11,150
Ubuntu. Then I'm going
to generate another

1410
01:02:11,150 --> 01:02:13,530
layer on top of that,
which is an app get

1411
01:02:13,530 --> 01:02:16,510
update, which basically
says go update the

1412
01:02:16,510 --> 01:02:21,930
repository indexes to
the latest version of the

1413
01:02:22,170 --> 01:02:27,250
packages available
for Ubuntu. And then I

1414
01:02:27,250 --> 01:02:29,850
run another layer, run
app get install, and

1415
01:02:29,850 --> 01:02:31,930
I'm installing Python
in this because the

1416
01:02:31,930 --> 01:02:34,590
base Ubuntu does not
have Python 3 installed.

1417
01:02:34,590 --> 01:02:37,270
And then I run
another layer, which I

1418
01:02:37,270 --> 01:02:43,350
run install flask in
the thing. And then

1419
01:02:43,350 --> 01:02:48,390
I run hello.py, or
I copy my program,

1420
01:02:48,420 --> 01:02:51,450
this is my actual
program that I want to

1421
01:02:51,450 --> 01:02:57,190
run, I copy that hello
.py into the root.

1422
01:02:57,190 --> 01:02:59,530
Now, this is the one
thing that you've

1423
01:02:59,530 --> 01:03:00,820
got to understand
about Dockerfiles.

1424
01:03:01,100 --> 01:03:03,180
When you do something
like a copy,

1425
01:03:03,370 --> 01:03:05,730
the copy directive
in the Dockerfile,

1426
01:03:05,730 --> 01:03:09,530
what that means
is copy from the

1427
01:03:09,530 --> 01:03:13,410
build directory on
your host machine

1428
01:03:14,270 --> 01:03:18,470
into the Docker
image, okay? It's not

1429
01:03:18,470 --> 01:03:21,110
host file to host
file, and it's not

1430
01:03:21,110 --> 01:03:23,610
Dockerfile or Docker
image file to Docker

1431
01:03:23,610 --> 01:03:26,650
image file. It's
from the host machine

1432
01:03:26,650 --> 01:03:29,650
that you're building
from to the Docker

1433
01:03:29,650 --> 01:03:31,530
image that you're
building into. So it

1434
01:03:31,530 --> 01:03:33,850
says, hey, where I'm
building this from,

1435
01:03:34,130 --> 01:03:36,110
same place where my
Docker file is, I

1436
01:03:36,110 --> 01:03:38,330
should see a hello.py
file, and I want to

1437
01:03:38,330 --> 01:03:40,250
copy it into the root
of my Docker image.

1438
01:03:40,250 --> 01:03:42,230
And then finally I do
a couple things. I'm

1439
01:03:42,230 --> 01:03:44,570
going to go ahead and
set up an environment

1440
01:03:44,570 --> 01:03:46,810
variable that's
available to my process

1441
01:03:46,810 --> 01:03:49,050
when it runs. I'm
going to expose port

1442
01:03:49,050 --> 01:03:51,460
8000, which is a
way of telling the

1443
01:03:51,930 --> 01:03:58,350
Docker image to expect
to listen on port 8000,

1444
01:03:58,350 --> 01:04:00,050
that it expects this
process to be able

1445
01:04:00,050 --> 01:04:02,770
to consume information
from port 8000.

1446
01:04:03,130 --> 01:04:07,430
It has a volume, my
data, that it would like

1447
01:04:07,430 --> 01:04:09,610
to be able to map to.
And then this is how

1448
01:04:09,610 --> 01:04:13,870
it runs my program. It
says flask run minus

1449
01:04:13,870 --> 01:04:16,690
host and gives this
information for flask.

1450
01:04:16,690 --> 01:04:20,210
Flask, this is all about
running Flask to get

1451
01:04:20,210 --> 01:04:23,990
this done. This hello
.py is a Flask file.

1452
01:04:26,010 --> 01:04:29,150
So that's everything
in the Docker file.

1453
01:04:29,150 --> 01:04:30,590
So how would I use
this? So what I

1454
01:04:30,590 --> 01:04:32,760
would do is I would
do a Docker build and

1455
01:04:34,370 --> 01:04:37,050
then dot. What the
dot is actually is

1456
01:04:37,050 --> 01:04:38,570
just saying, where's
my Docker build

1457
01:04:38,570 --> 01:04:40,490
directory? I can run
Docker build from

1458
01:04:40,490 --> 01:04:42,150
anywhere and say,
this is the directory.

1459
01:04:42,170 --> 01:04:44,010
Oftentimes, we put
the Docker file in

1460
01:04:44,010 --> 01:04:45,210
the same location
where we're going to

1461
01:04:45,210 --> 01:04:46,890
build things that
we're already

1462
01:04:46,890 --> 01:04:49,530
building from. So
oftentimes, when we run

1463
01:04:49,530 --> 01:04:51,570
docker build, we
can specify dot. And

1464
01:04:51,570 --> 01:04:54,450
then wherever the
build directory is,

1465
01:04:54,570 --> 01:04:56,350
Docker will
automatically look for a

1466
01:04:56,350 --> 01:04:58,290
Docker file in that
build directory.

1467
01:04:59,150 --> 01:05:00,750
There is an
option, by the way,

1468
01:05:00,750 --> 01:05:02,110
on Docker build
to specify,

1469
01:05:02,110 --> 01:05:03,890
oh, here's my build
directory in my Docker

1470
01:05:03,890 --> 01:05:06,230
file, some other
location if you want to.

1471
01:05:06,250 --> 01:05:07,830
Now, when I run this,

1472
01:05:08,170 --> 01:05:09,350
this is where
it goes. And

1473
01:05:09,350 --> 01:05:10,750
this ran pretty quickly.

1474
01:05:11,230 --> 01:05:13,480
It went through and
built everything.

1475
01:05:13,480 --> 01:05:15,730
Okay, and so if we
take a look at this,

1476
01:05:15,730 --> 01:05:17,790
it says, okay, load,
build definition,

1477
01:05:18,130 --> 01:05:22,110
transfer, it's doing
some resolution stuff,

1478
01:05:22,190 --> 01:05:24,230
it says it's pulling
from the registry,

1479
01:05:24,230 --> 01:05:28,690
verifying the base Docker
image that I'm using,

1480
01:05:30,540 --> 01:05:33,330
internal stuff. and
then it says, okay,

1481
01:05:33,330 --> 01:05:35,350
it says we got all
that set up and then

1482
01:05:35,350 --> 01:05:37,770
say, okay, I'm going
to pull from the

1483
01:05:37,770 --> 01:05:39,990
base image. This is
layer one of five.

1484
01:05:40,290 --> 01:05:42,270
I'm going to run
app get update,

1485
01:05:42,270 --> 01:05:44,220
layer two of
five, run app get

1486
01:05:44,220 --> 01:05:46,590
install, run
the pip install,

1487
01:05:46,810 --> 01:05:48,770
copy the hello
.py. Each one of

1488
01:05:48,770 --> 01:05:50,130
those, there's five
different layers.

1489
01:05:50,150 --> 01:05:52,630
Now, notice this
word cache in front,

1490
01:05:52,930 --> 01:05:53,930
okay?

1491
01:05:53,950 --> 01:05:55,170
I have already built

1492
01:05:55,170 --> 01:05:56,530
this Docker image once.

1493
01:05:56,720 --> 01:05:58,050
And remember what
I was saying about

1494
01:05:58,050 --> 01:05:59,190
those layers? One
of the reasons

1495
01:05:59,190 --> 01:06:00,250
why we do the
layers so it can

1496
01:06:00,250 --> 01:06:02,210
automatically figure
out what's changed.

1497
01:06:02,210 --> 01:06:04,650
Nothing changed
in my Docker file.

1498
01:06:04,650 --> 01:06:07,110
So when I
rebuilt this, all

1499
01:06:07,110 --> 01:06:09,930
those layers came
out of the cache.

1500
01:06:10,070 --> 01:06:12,350
And so they actually
didn't do anything.

1501
01:06:12,920 --> 01:06:14,650
If I made a change to the

1502
01:06:14,650 --> 01:06:17,230
Docker file, actually,

1503
01:06:19,850 --> 01:06:21,230
here, let me do
this. I'm not going

1504
01:06:21,230 --> 01:06:22,230
to actually make
a change to the

1505
01:06:22,230 --> 01:06:23,370
Docker file. What
I'm going to do is

1506
01:06:23,370 --> 01:06:24,870
I'm just going to
touch hello.py.

1507
01:06:25,370 --> 01:06:29,110
This updates the
timestamp on hello.py.

1508
01:06:29,270 --> 01:06:31,850
Now watch me run
Docker build again.

1509
01:06:33,110 --> 01:06:35,030
Oh, it didn't work the
way it was supposed

1510
01:06:35,030 --> 01:06:36,730
to. This worked earlier
in the test. Well,

1511
01:06:36,730 --> 01:06:38,570
I'll do something even
more drastic. We're

1512
01:06:38,570 --> 01:06:43,470
going to say Docker
build dot no cache.

1513
01:06:43,800 --> 01:06:45,090
Now what it's going to do

1514
01:06:45,090 --> 01:06:47,490
is ignore all the layers.

1515
01:06:47,790 --> 01:06:50,750
I should have, when
I updated hello.py,

1516
01:06:50,750 --> 01:06:53,350
it should have not
cached that. It should

1517
01:06:53,350 --> 01:06:55,490
have grabbed a new
copy. It must have

1518
01:06:55,490 --> 01:06:57,810
done a check to
make sure that it

1519
01:06:57,810 --> 01:06:59,170
wasn't different.
This time, I'm saying

1520
01:06:59,170 --> 01:07:01,190
ignore all the layers
I've already built.

1521
01:07:01,850 --> 01:07:03,630
Now, this is going
to take a lot longer,

1522
01:07:03,630 --> 01:07:05,530
but it shows you
what's going on.

1523
01:07:05,570 --> 01:07:08,710
It's actually reporting
out as it's doing

1524
01:07:08,710 --> 01:07:11,410
the various build
operations. So right

1525
01:07:11,410 --> 01:07:13,670
now, we're doing an
app install Python.

1526
01:07:13,870 --> 01:07:15,290
It takes a little time to

1527
01:07:15,290 --> 01:07:17,770
install Python
on here, okay?

1528
01:07:19,270 --> 01:07:21,090
When I did this
before class, this

1529
01:07:21,090 --> 01:07:24,190
ran for about 40
seconds, this layer.

1530
01:07:27,370 --> 01:07:29,550
and we're done we got
through it a little

1531
01:07:29,550 --> 01:07:31,750
bit faster we got
time is at 25 seconds

1532
01:07:31,750 --> 01:07:34,050
to do this then we
installed blast that

1533
01:07:34,050 --> 01:07:35,410
went real quick and
then we installed

1534
01:07:35,410 --> 01:07:37,850
hello but i rebuilt
this and but this time

1535
01:07:37,850 --> 01:07:40,650
i built each layer
individually notice

1536
01:07:40,650 --> 01:07:42,650
the difference in
time when i was only

1537
01:07:42,650 --> 01:07:44,550
making one change only
had to build it one

1538
01:07:44,550 --> 01:07:47,450
way now if i had made
a change to layer

1539
01:07:47,450 --> 01:07:50,450
three say i added
additional package that

1540
01:07:50,450 --> 01:07:52,510
I wanted to install
aside from Python,

1541
01:07:52,850 --> 01:07:55,850
then layer three would
be, layer one and

1542
01:07:55,850 --> 01:07:58,030
two would be the
same, so it wouldn't

1543
01:07:58,030 --> 01:08:00,110
rebuild those, those
would we get in cache,

1544
01:08:00,110 --> 01:08:04,550
but if I added another
package for this

1545
01:08:04,550 --> 01:08:07,750
app install here, then
this layer would be

1546
01:08:07,750 --> 01:08:09,850
rebuilt, and then
every subsequent layer

1547
01:08:09,850 --> 01:08:11,650
would have had to
been rebuilt as well.

1548
01:08:12,070 --> 01:08:16,090
So this is just
getting you the basics,

1549
01:08:16,090 --> 01:08:17,690
I gave you a reference
to the Docker

1550
01:08:17,690 --> 01:08:19,970
tutorial to get started
on that i highly

1551
01:08:19,970 --> 01:08:21,770
recommend that you
guys go through that

1552
01:08:21,770 --> 01:08:24,090
practice a little
bit with this we're

1553
01:08:24,090 --> 01:08:25,590
going to take a look
at docker compose and

1554
01:08:25,590 --> 01:08:26,990
some other kinds of
things and also do

1555
01:08:26,990 --> 01:08:28,870
a little bit of
review for the midterm

1556
01:08:28,870 --> 01:08:32,750
on monday you guys
have a great weekend